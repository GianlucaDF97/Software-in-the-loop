<?xml version="1.0" encoding="utf-8"?>
<Stateflow>
  <machine id="331">
    <P Name="created">19-Feb-2019 13:08:28</P>
    <P Name="isLibrary">0</P>
    <P Name="sfVersion">80000014</P>
    <Children>
      <target id="873" name="sfun">
        <P Name="description">Default Simulink S-Function Target.</P>
      </target>
      <target id="874" name="rtw"/>
      <chart id="332">
        <P Name="name">AUTOPILOTA/Subsystem1/DECOLLO AUTOMATICO/Chart1</P>
        <P Name="windowPosition">[-8 -8 1456 876]</P>
        <P Name="viewLimits">[-281.102 1960.597 46.171 1136.389]</P>
        <P Name="zoomFactor">1.667</P>
        <P Name="screen">[1 1 3200 1200 1.25]</P>
        <P Name="viewObj">332</P>
        <P Name="ssIdHighWaterMark">111</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="chartFileNumber">1</P>
        <P Name="allowGlobalAccessToExportedFunctions">0</P>
        <P Name="saturateOnIntegerOverflow">1</P>
        <P Name="userSpecifiedStateTransitionExecutionOrder">1</P>
        <P Name="disableImplicitCasting">1</P>
        <P Name="actionLanguage">2</P>
        <Children>
          <state SSID="79">
            <P Name="labelString">Fase_0_ATO
du:
Fase_ATO = 0;
psi_ref_selector = 0;
theta_ground_selector = 0;
psi_ref = 0;
phi_ref = 0;
eq_rot = 0;
Tas_ref = 0;
pitch_ref = 0;
h_ref = 0;</P>
            <P Name="position">[183.0064 211.7365 152.9842 168.9728]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">332</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="5">
            <P Name="labelString">Fase_2_ATO %rullaggio
du:
Fase_ATO = 2;
% devo mettere uno switch sulla manetta che tramite FASE_ATO la incrementa gradualmente fino al massimo e poi switcho sul controllore di velocita
psi_ref_selector=0;
psi_ref = psi_hold;
phi_ref = 0;
h_ref = 0;
eq_rot = 2;
Tas_ref = 25;
</P>
            <P Name="position">[647.3971 335.7172 143.3333 143]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">332</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="111">
            <P Name="labelString">la condizione V_&gt;10 va messa soltanto in HIL, altrimenti in presenza di vento simulato l&apos;aereo non parte</P>
            <P Name="position">[1114.1773 429.9979 551.7969 16]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">GROUPED</P>
            <P Name="isNoteBox">1</P>
            <P Name="subviewer">332</P>
            <P Name="type">GROUP_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="4">
            <P Name="labelString">Fase_1_ATO
du:
Fase_ATO = 1;
manetta_ref = 0.1;
psi_ref_selector=0;
h_ref = 0;
psi_ref = psi_hold;
phi_ref = 0;
eq_rot = 2;
</P>
            <P Name="position">[180 528.4975 147 134.6667]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">332</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="6">
            <P Name="labelString">Fase_3_ATO  %rotazione
du:
Fase_ATO = 3;
psi_ref_selector=0;
theta_ground_selector = 0;
psi_ref = psi_hold;
phi_ref = 0;
h_ref = 0;
pitch_ref = 10 + theta_ground_hold;
Tas_ref = 25;
%devo passare al controllore di pitch, prima davo direttamente l&apos;angolo dell&apos;equilibratore a picchiare (ora devo fare la rotazione)</P>
            <P Name="position">[1086.5277 528.4975 195.1333 169.2068]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">332</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="104">
            <P Name="labelString">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0//EN&quot; &quot;http://www.w3.org/TR/REC-html40/strict.dtd&quot;&gt;
&lt;html&gt;&lt;head&gt;&lt;meta name=&quot;qrichtext&quot; content=&quot;1&quot; /&gt;&lt;style type=&quot;text/css&quot;&gt;
p, li { white-space: pre-wrap; }
&lt;/style&gt;&lt;/head&gt;&lt;body style=&quot; font-family:&apos;Helvetica&apos;; font-size:12px; font-weight:400; font-style:normal;&quot;&gt;
&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:24px; color:#ff0000;&quot;&gt;quando si carica su arduino mettere manetta_ref = 0.05&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;&quot;&gt;&lt;span style=&quot; font-size:24px; color:#ff0000;&quot;&gt;o leggermente piu alto, in modo che l&apos;elica giri ma non spinga&lt;/span&gt;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</P>
            <P Name="position">[20.9749 693.1324 651.9375 58]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">GROUPED</P>
            <P Name="isNoteBox">1</P>
            <noteBox>
              <P Name="interpretMode">RICH_NOTE</P>
            </noteBox>
            <P Name="subviewer">332</P>
            <P Name="type">GROUP_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="85">
            <P Name="labelString">Fase_4_ATO  %salita
du:
Fase_ATO = 4;
psi_ref_selector=0;
psi_ref = psi_hold;
h_ref = 35;
RC_ref = 3;
Tas_ref = 25;
%devo passare al controllore di quota, prima controllavo il pitch
%devo passare al controllore di roll canonico, prima fissavo il riferimento di roll = 0</P>
            <P Name="position">[680.8848 829.8299 174.3333 166.0068]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">332</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <data SSID="72" name="modo">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="73" name="Fase_ATO">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="74" name="manetta_ref">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="75" name="psi_ref">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="82" name="eq_rot">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="83" name="phi_ref">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="93" name="TAS">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="94" name="pitch_ref">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="95" name="h_ref">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="96" name="Tas_ref">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="97" name="h">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="84" name="psi_hold">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="103" name="RC_ref">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="76" name="psi_ref_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="106" name="theta_ground_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="108" name="theta_ground_hold">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="110" name="V_">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="81">
            <P Name="labelString"/>
            <P Name="labelPosition">[271.688 45.112 2 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 -0 1 0 255.4505 20.7626 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">79</P>
              <P Name="intersection">[1 0 -1 0.4735 255.4505 211.7365 0 0]</P>
            </dst>
            <P Name="midPoint">[255.4505 112.2496]</P>
            <P Name="dataLimits">[253.05 257.851 20.763 211.737]</P>
            <P Name="subviewer">332</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="45">
            <P Name="labelString">[modo==3]{psi_ref_selector=1;}</P>
            <P Name="labelPosition">[55.236 424.623 168.969 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">79</P>
              <P Name="intersection">[3 -0 1 0.5519 251.5512 380.7093 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">4</P>
              <P Name="intersection">[1 0 -1 0.4867 251.5512 528.4975 0 0]</P>
            </dst>
            <P Name="midPoint">[251.5512 450.6034]</P>
            <P Name="dataLimits">[249.151 253.951 380.709 528.497]</P>
            <P Name="subviewer">332</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="12">
            <P Name="labelString">[TAS &gt;= 18 &amp;&amp; V_ &gt;= 10]{theta_ground_selector = 1;}</P>
            <P Name="labelPosition">[1026.413 400.682 287.422 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">5</P>
              <P Name="intersection">[2 1 0 0.4778 790.7304 404.0432 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">6</P>
              <P Name="intersection">[1 0 -1 0.1154 1109.0391 528.4975 0 0]</P>
            </dst>
            <P Name="midPoint">[992.2526 419.9025]</P>
            <P Name="dataLimits">[790.73 1111.439 402.614 528.497]</P>
            <P Name="subviewer">332</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="11">
            <P Name="labelString">after(250,tick)</P>
            <P Name="labelPosition">[455.041 374.186 75.281 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">4</P>
              <P Name="intersection">[1 0 -1 0.8384 303.2406 528.4975 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">5</P>
              <P Name="intersection">[4 -1 0 0.5116 647.3971 405.5531 0 0]</P>
            </dst>
            <P Name="midPoint">[374.7709 472.6287]</P>
            <P Name="dataLimits">[303.241 647.397 403.153 528.497]</P>
            <P Name="subviewer">332</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="68">
            <P Name="labelString">[h &gt;= 2]</P>
            <P Name="labelPosition">[1083.972 784.405 42.656 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">6</P>
              <P Name="intersection">[3 0 1 0.9231 1101.5277 697.7043 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">85</P>
              <P Name="intersection">[2 1 0 0.527 855.2181 917.3226 0 0]</P>
            </dst>
            <P Name="midPoint">[1022.8821 848.0226]</P>
            <P Name="dataLimits">[855.218 1101.528 697.704 919.723]</P>
            <P Name="subviewer">332</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="102">
            <P Name="labelString"/>
            <P Name="labelPosition">[570.497 884.433 0 0]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">85</P>
              <P Name="intersection">[4 -1 0 0.5626 680.8848 902.4333 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">67</P>
              <P Name="intersection">[2 1 0 0 452.1096 902.4333 0 0]</P>
            </dst>
            <P Name="midPoint">[570.4972 902.4333]</P>
            <P Name="dataLimits">[452.11 680.885 900.033 904.833]</P>
            <P Name="subviewer">332</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="67">
            <P Name="position">[445.1096 902.4333 7]</P>
            <P Name="visible">0</P>
            <P Name="subviewer">332</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="365">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/APPROACH/MATLAB Function</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">365</P>
        <P Name="ssIdHighWaterMark">13</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">2</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">365</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [x_f_out,h_f_out,k_x_out,h_c_out,no_solution] = fcn(reset,gamma,xg0)

 

x_f=-200;
h_f=1.5;
%x_f=-300;
%h_f=10;
k_x=0.01;
h_c=-2;
x_td=5;
h_td_dot=-0.1;
x_td_dot=18;
no_solution = 0;

% x_f=-200;
% h_f=5;
% %x_f=-300;
% %h_f=10;
% k_x=0.01;
% h_c=-1;
% x_td=50;
% h_td_dot=-0.15;
% x_td_dot=18;
% no_solution = 0;

% F = [f(x_f,h_f,gamma,xg0); g(h_c,h_f,k_x,gamma); r(h_c,h_f,k_x,x_f,x_td); s(h_c,h_f,k_x,x_f,x_td,h_td_dot,x_td_dot)];
% 
% J = [ df1() df2(gamma) df3() df4();
%       dg1(k_x) dg2() dg3(h_f,h_c) dg4(k_x);
%       dr1(k_x,x_td,x_f) dr2(k_x,x_td,x_f) dr3(k_x,x_td,x_f,h_f,h_c) dr4();
%       ds1(k_x,x_td,x_f,x_td_dot) ds2(k_x,x_td,x_f,x_td_dot,h_f,h_c) ds3(k_x,x_td,x_f,x_td_dot,h_f,h_c) ds4(k_x,x_td,x_f,x_td_dot)]

persistent x x_new cycle_count eps

if (isempty(x) ||  reset == 0)
x = [h_f; x_f; k_x; h_c];
end

if (isempty(x_new) || reset == 0)
x_new = zeros(4,1);
end

if (isempty(eps) || reset == 0)
eps = ones(1,4);
end
   
if (isempty(cycle_count) || reset == 0)
cycle_count = 0;
end




while ~ (eps(1) &lt; 0.1 &amp;&amp; eps(2) &lt; 0.1 &amp;&amp; eps(3) &lt; 0.1 &amp;&amp; eps(4) &lt; 0.1 )

F = [f(x(2),x(1),gamma,xg0); g(x(4),x(1),x(3),gamma); r(x(4),x(1),x(3),x(2),x_td); s(x(4),x(1),x(3),x(2),x_td,h_td_dot,x_td_dot)];

J = [ df1() df2(gamma) df3() df4();
      dg1(x(3)) dg2() dg3(x(1),x(4)) dg4(x(3));
      dr1(x(3),x_td,x(2)) dr2(x(3),x_td,x(2),x(1),x(4)) dr3(x(3),x_td,x(2),x(1),x(4)) dr4();
      ds1(x(3),x_td,x(2),x_td_dot) ds2(x(3),x_td,x(2),x_td_dot,x(1),x(4)) ds3(x(3),x_td,x(2),x_td_dot,x(1),x(4)) ds4(x(3),x_td,x(2),x_td_dot)] ; 
  
  
x_new = x - J^(-1)*F;

eps(1) = abs(x_new(1)-x(1));
eps(2) = abs(x_new(2)-x(2));
eps(3) = abs(x_new(3)-x(3));
eps(4) = abs(x_new(4)-x(4));


x = x_new;

cycle_count = cycle_count + 1;

if cycle_count &gt; 10
   no_solution = 1; 
   break; 
end

end

if (eps(1) &lt; 0.1 &amp;&amp; eps(2) &lt; 0.1 &amp;&amp; eps(3) &lt; 0.1 &amp;&amp; eps(4) &lt; 0.1 )
   
h_f_out = x(1);
x_f_out = x(2);
k_x_out = x(3);
h_c_out = x(4);

else
    
h_f_out = 0;
x_f_out = 0;
k_x_out = 0;
h_c_out = 0;    
end

function y = f(x_f,h_f,gamma,xg0)                 %inizio equazioni sistema non lineare
y = h_f+(x_f-xg0)*tan(gamma);
end

function y = g(h_c,h_f,k_x,gamma)
y = (h_f-h_c)*k_x-tan(gamma);
end

function y = r(h_c,h_f,k_x,x_f,x_td)
y = h_c + (h_f-h_c)*exp(-k_x*(x_td-x_f));
end

function y = s(h_c,h_f,k_x,x_f,x_td,h_td_dot,x_td_dot)
y = h_td_dot + (h_f-h_c)*k_x*x_td_dot*exp(-k_x*(x_td-x_f));        
end                                                                   % fine equazioni sistema non lineare

function y = df1()                                                    %inizio derivate
y = 1;
end

function y = df2(gamma)
y = tan(gamma);
end

function y = df3()
y = 0;
end

function y = df4()
y = 0;
end

function y = dg1(k_x)
y = k_x;
end

function y = dg2()
y = 0;
end

function y = dg3(h_f,h_c)
y = h_f-h_c;
end

function y = dg4(k_x)
y = -k_x;
end

function y = dr1(k_x,x_td,x_f)
y = exp(-k_x*(x_td-x_f));
end

function y = dr2(k_x,x_td,x_f,h_f,h_c)
y = (h_f-h_c)*k_x*exp(-k_x*(x_td-x_f));
end

function y = dr3(k_x,x_td,x_f,h_f,h_c)
y = (h_f-h_c)*(x_f-x_td)*exp(-k_x*(x_td-x_f));
end

function y = dr4()
y = 1;
end

function y = ds1(k_x,x_td,x_f,x_td_dot)
y = k_x*x_td_dot*exp(-k_x*(x_td-x_f));
end

function y = ds2(k_x,x_td,x_f,x_td_dot,h_f,h_c)
y = (h_f-h_c)*k_x^2*x_td_dot*exp(-k_x*(x_td-x_f));
end

function y = ds3(k_x,x_td,x_f,x_td_dot,h_f,h_c)
y = (h_f-h_c)*x_td_dot*exp(-k_x*(x_td-x_f))+(h_f-h_c)*k_x*x_td_dot*(x_f-x_td)*exp(-k_x*(x_td-x_f));
end

function y = ds4(k_x,x_td,x_f,x_td_dot)
y = -k_x*x_td_dot*exp(-k_x*(x_td-x_f));
end



end

</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="13" name="reset">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="4" name="gamma">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="x_f_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="h_f_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="xg0">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="k_x_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="11" name="h_c_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="12" name="no_solution">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">365</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">365</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="378">
        <P Name="name">Misure Sensori/BMP_280/MATLAB Function</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">378</P>
        <P Name="ssIdHighWaterMark">12</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">3</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">378</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [rate_l_up, P_refer, rate_l_dw]  = fcn( Cal_alt, P,P_int,P_cal)
%#codegen

persistent P_ref rl_up rl_dw

if isempty(P_ref)
    
    P_ref = 101325;
    
end

if isempty(rl_up)
    
    rl_up = 300;
    
end

if isempty(rl_dw)
    
    rl_dw = -300;
    
end

if Cal_alt == 1
    
    P_ref = P;
 
end

if P_int == 1
   
   P_ref = P_cal; 
   rl_up = 20;
   rl_dw = -20;
    
end
    


P_refer = P_ref;

rate_l_up = rl_up;
rate_l_dw = rl_dw;
</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="11" name="rate_l_up">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="Cal_alt">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="4" name="P">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="P_int">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="P_refer">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="P_cal">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="12" name="rate_l_dw">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">378</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">378</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="390">
        <P Name="name">Misure Sensori/GPS_Venus/Subsystem2/Create_message</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">390</P>
        <P Name="ssIdHighWaterMark">6</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">4</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">LETTURA_NMEA</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">390</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [status,messaggio]  = LETTURA_NMEA(byte_pack)

persistent message counter start_found end_found

status = false;       %ho aggiunto questo
messaggio = uint8(zeros(1,80)) ;
pos_end = uint8(0) ;
M = uint8(length(byte_pack)) ;


if isempty(end_found) 
    end_found = false ;
end 
if isempty(start_found) 
     start_found = false ;
end 
if isempty (counter) 
    counter = uint8(0) ;
end 
if isempty(message)
     message = uint8(zeros(1,80)) ;
end



if start_found == 0 
    for i = uint8(1) : M  
        if byte_pack(i) == &apos;$&apos; 
            message(1:M - (i-1)) = byte_pack(i:end) ;
            counter = M - (i-1) ; 
            start_found = true ;
            break
        end
    end
    
    
elseif start_found == 1
    for i = uint8(1) : M  
        if byte_pack(i) == 13 
            end_found = true ;
            pos_end = i ;
            break
        end
    end
    
    if end_found == 1
        message(counter + 1 : counter + pos_end) = byte_pack(1:pos_end) ;
        status = true;       %ho aggiunto questo
        messaggio = message ;
        end_found = false ;
        counter = M - pos_end ;
        if pos_end == M 
            start_found = false ; 
            message = uint8(zeros(1,80)) ;
        else  
            start_found = true ;
            message(1:(M - pos_end)) = byte_pack(pos_end + 1 : end) ;
            message(M - pos_end +1 : 80) = uint8(zeros(1,80 - (M - pos_end) )) ;
        end
         

    else 
    message(counter + 1 : M + counter ) = byte_pack ;
    counter = M + counter  ;
   
    end
    
    
 
        
    
    
end
        </P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="6" name="status">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="4" name="byte_pack">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="messaggio">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">390</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">390</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="398">
        <P Name="name">Misure Sensori/GPS_Venus/Subsystem2/Subsystem/MATLAB Function</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">398</P>
        <P Name="ssIdHighWaterMark">17</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">5</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">parser_NMEA</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">398</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [Lat,Long,V,Magnetic_declination,heading,fix_mode,n_sat,h_mean_sea,h_WGS84,indice_dimario] = parser_NMEA(messaggio,out_prec)
    

messaggio = char(messaggio) ;

comma_gga = uint8(zeros(1,14));
comma_rmc = uint8(zeros(1,12));
star = uint8(0);
dollar = uint8(0);
find_dollar = uint8(0);
find_comma = uint8(0);
message_type = uint8(zeros(1,5));
indice_dimario = uint8(0);





for i=1:length(messaggio)
   if messaggio(i) == &apos;$&apos;
       find_dollar = find_dollar + uint8(1);
   end
   if messaggio(i) == &apos;,&apos;
       find_comma = find_comma + uint8(1);
   end
end
    
if (find_dollar == 1 &amp;&amp; (find_comma == 12 || find_comma == 14))               % controllo se il numero di $ e , sono corretti all&apos;interno di messaggio
                                                                             % altrimenti il messaggio  corrotto ed in output mando i messaggi
                                                                             % precedenti
dollar= find(messaggio == &apos;$&apos;,1);

mess_type = messaggio(dollar(1) + 1 : dollar(1) + 5);                              %  il nome del messaggio arrivato

% decodifica mesaggio RMC

if mess_type == &apos;GPRMC&apos;
comma_rmc = find(messaggio == &apos;,&apos;);                                              % restituisce le posizioni delle virgole all&apos;interno del messaggio
star = find(messaggio == &apos;*&apos;);                                               % restituisce la posizione dell&apos;asterisco all&apos;interno del messaggio
dollar = find(messaggio == &apos;$&apos;);                                             % restituisce la posizione del dollaro all&apos;interno del messaggio

Lat_1 = str2double(messaggio(comma_rmc(3) + 1 : comma_rmc(3) + 2));
Lat_2 = str2double(messaggio(comma_rmc(3) + 3 : comma_rmc(4) - 1))/60;
Lat = Lat_1 + Lat_2;
if messaggio(comma_rmc(4) + 1) == &apos;S&apos;
Lat = -Lat; 
end

Long_1 = str2double(messaggio(comma_rmc(5) + 1 : comma_rmc(5) + 3));
Long_2 = str2double(messaggio(comma_rmc(5) + 4 : comma_rmc(6) - 1))/60;
Long = Long_1 + Long_2;
if messaggio(comma_rmc(6) + 1) == &apos;W&apos;
Long = -Long; 
end

V = str2double(messaggio(comma_rmc(7) + 1 : comma_rmc(8) - 1)); 
    
heading = str2double(messaggio(comma_rmc(8) + 1 : comma_rmc(9) - 1));

Magnetic_declination = str2double(messaggio(comma_rmc(10) + 1 : comma_rmc(11) - 1));
if messaggio(comma_rmc(11) + 1) == &apos;W&apos;
Magnetic_declination = -Magnetic_declination; 
end

% questi dati non sono presenti nel messaggio rmc, quindi prendo quelli
% precedenti

fix_mode = complex(out_prec(6),0);

n_sat = complex(out_prec(7),0) ;

h_mean_sea = complex(out_prec(8),0) ;

h_WGS84 = complex(out_prec(9),0) ;


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% calcolo checksum

ck_ric = char(zeros(1,2)) ;
ck_ric(1) = messaggio(star(1) + uint8(1))  ;
ck_ric(2) = messaggio(star(1) + uint8(2)) ;

NMEA_rmc_string = uint8(messaggio(dollar(1)+1:star(1)-1)) ;

checksum = uint8(0) ;
for i = 1:length(NMEA_rmc_string) 
    checksum = bitxor(checksum,NMEA_rmc_string(i),&apos;uint8&apos;) ;
end

if checksum ~= hex2dec(ck_ric) 
    Lat = out_prec(1) ;
    Long = out_prec(2) ;
    V = out_prec(3) ;
    Magnetic_declination = out_prec(4);
    heading = out_prec(5) ; 
    fix_mode = complex(out_prec(6),0);
    n_sat = complex(out_prec(7),0) ;
    h_mean_sea = complex(out_prec(8),0) ;
    h_WGS84 = complex(out_prec(9),0) ;
    indice_dimario = uint8(10);
end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% decodifica mesaggio GGA

elseif mess_type == &apos;GPGGA&apos;
comma_gga = find(messaggio == &apos;,&apos;); 
star = find(messaggio == &apos;*&apos;);
dollar = find(messaggio == &apos;$&apos;);


Lat_1 = str2double(messaggio(comma_gga(2) + 1 : comma_gga(2) + 2));
Lat_2 = str2double(messaggio(comma_gga(2) + 3 : comma_gga(3) - 1))/60;
Lat = Lat_1 + Lat_2;
if messaggio(comma_gga(3) + 1) == &apos;S&apos;
Lat = -Lat; 
end


Long_1 = str2double(messaggio(comma_gga(4) + 1 : comma_gga(4) + 3));
Long_2 = str2double(messaggio(comma_gga(4) + 4 : comma_gga(5) - 1))/60;
Long = Long_1 + Long_2;
if messaggio(comma_gga(5) + 1) == &apos;W&apos;
Long = -Long; 
end


fix_mode = str2double(messaggio(comma_gga(6) + 1)); 

n_sat = str2double(messaggio(comma_gga(7) + 1 : comma_gga(8) - 1));

h_mean_sea = str2double(messaggio(comma_gga(9) + 1 : comma_gga(10) - 1));

h_WGS84 = str2double(messaggio(comma_gga(11) + 1 : comma_gga(12) - 1));

% questi dati non sono presenti nel messaggio rmc, quindi prendo quelli
% precedenti

V = out_prec(3) ;

Magnetic_declination = out_prec(4);

heading = out_prec(5) ; 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% calcolo del checksum
ck_ric = char(zeros(1,2)) ;
ck_ric(1) = messaggio(star(1) + uint8(1))  ;
ck_ric(2) = messaggio(star(1) + uint8(2)) ;

NMEA_gga_string = uint8(messaggio(dollar(1)+1:star(1)-1)) ;

checksum = uint8(0) ;
for i = 1:length(NMEA_gga_string) 
    checksum = bitxor(checksum,NMEA_gga_string(i),&apos;uint8&apos;) ;
end

if checksum ~= hex2dec(ck_ric) 
    Lat = out_prec(1) ;
    Long = out_prec(2) ;
    V = out_prec(3) ;
    Magnetic_declination = out_prec(4);
    heading = out_prec(5) ; 
fix_mode = complex(out_prec(6),0);

n_sat = complex(out_prec(7),0) ;

h_mean_sea = complex(out_prec(8),0) ;

h_WGS84 = complex(out_prec(9),0) ;
indice_dimario = uint8(20);
   
    
end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
        
else
    
    Lat = out_prec(1) ;
    Long = out_prec(2) ;
    V = out_prec(3) ;
    Magnetic_declination = out_prec(4);
    heading = out_prec(5) ; 
fix_mode = complex(out_prec(6),0);

n_sat = complex(out_prec(7),0) ;

h_mean_sea = complex(out_prec(8),0) ;

h_WGS84 = complex(out_prec(9),0) ; 
   
    
    
end


else
    
    Lat = out_prec(1) ;
    Long = out_prec(2) ;
    V = out_prec(3) ;
    Magnetic_declination = out_prec(4);
    heading = out_prec(5) ; 
    fix_mode = complex(out_prec(6),0);
    n_sat = complex(out_prec(7),0) ;
    h_mean_sea = complex(out_prec(8),0) ;
    h_WGS84 = complex(out_prec(9),0) ; 
end

end
    </P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="messaggio">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="Lat">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="Long">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="V">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="16" name="Magnetic_declination">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="heading">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="15" name="fix_mode">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="14" name="n_sat">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="h_mean_sea">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="h_WGS84">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="11" name="out_prec">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="17" name="indice_dimario">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">398</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">398</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="415">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/CALIBRATING_HOME_COORDINATES</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">415</P>
        <P Name="ssIdHighWaterMark">20</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">6</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">415</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [Lat_Home,Long_Home,h_Home,psi_Home] = fcn(Cal_home,Lat,Long,h,psi,GC_info,WP_AL,WP_db_info)
%#codegen

persistent Lat_H;
persistent Long_H;
persistent h_H;
persistent psi_H;
persistent counter;

if isempty( Lat_H)
    Lat_H = 0;
end

if isempty(Long_H)
   Long_H = 0;
end

if isempty(h_H)
    h_H = 0;
end

if isempty(psi_H)
    psi_H = 2.8274;        %162deg      (%2.79-160deg)
end

if isempty(counter)
    counter = 1;
end




% if Cal_home(1)==1
%     
%     Lat_H = Lat;
%     Long_H = Long;
%     h_H = h;
%     psi_H = psi;
%     
% end
% 
% if GC_info == 3
%     counter = 1;
%     for indice=1:size(WP_AL,1)
%         if WP_db_info(indice,5)==1
%             counter=indice;
%         end
%     end
% end
% 
% AL = WP_AL(counter,2);
% LatWP = WP_AL(counter,5);
% LongWP = WP_AL(counter,6);
% 
% LatWP2 = WP_AL(counter+1,5);
% LongWP2 = WP_AL(counter+1,6);    
% 
% dr=pi/180;
% 
% if AL == 1
%     Lat_Home = LatWP*dr;
%     Long_Home = LongWP*dr;
%     h_Home = WP_AL(counter,7);
%     psi_Home = atan2(sin(LongWP2*dr-LongWP*dr)*cos(LatWP2*dr),cos(LatWP*dr)*sin(LatWP2*dr)-sin(LatWP*dr)*cos(LatWP2*dr)*cos(LongWP2*dr-LongWP*dr));
% else
%     Lat_Home=Lat_H;
%     Long_Home=Long_H;
%     h_Home=h_H;
%     psi_Home=psi_H;
% end
dr=pi/180;

LatWP = WP_AL(1,5);
LongWP = WP_AL(1,6);

LatWP2 = WP_AL(2,5);
LongWP2 = WP_AL(2,6); 

Lat_Home = LatWP*dr;
Long_Home = LongWP*dr;
h_Home = WP_AL(1,7);
psi_Home = atan2(sin(LongWP2*dr-LongWP*dr)*cos(LatWP2*dr),cos(LatWP*dr)*sin(LatWP2*dr)-sin(LatWP*dr)*cos(LatWP2*dr)*cos(LongWP2*dr-LongWP*dr));

if psi_Home &lt; 0
    psi_Home = 2*pi - abs(psi_Home);
end</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="11" name="Cal_home">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="Lat_Home">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="Long_Home">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="Lat">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="Long">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="h">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="psi">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="12" name="h_Home">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="13" name="psi_Home">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="18" name="GC_info">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="19" name="WP_AL">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="20" name="WP_db_info">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">415</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">415</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="432">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/CREAZIONE_WAYPOINT /MATLAB Function</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">432</P>
        <P Name="ssIdHighWaterMark">14</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">7</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn2</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">432</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">

function [lat_end,long_end] = fcn2(lat_ini,long_ini,heading,distance)


lat_end=zeros(1,3);
long_end=zeros(1,3);

R=6378137 ; %Earth Radius  

for n=1:3
    
lat_end(n) = asin(sin(lat_ini)*cos(distance(n)/R) + cos(lat_ini)*sin(distance(n)/R)*cos(heading));
long_end(n) = long_ini + atan2(sin(heading)*sin(distance(n)/R)*cos(lat_ini), cos(distance(n)/R)-sin(lat_ini)*sin(lat_end(n))); 


end


end


</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="5" name="lat_end">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="long_end">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="lat_ini">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="11" name="long_ini">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="12" name="heading">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="13" name="distance">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">432</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">432</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="443">
        <P Name="name">MISURE DA SENSORI 
FILTRATE/TX &amp; RX Seriale
Arduino Raspberry/Subsystem1/MATLAB Function</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">443</P>
        <P Name="ssIdHighWaterMark">6</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">8</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">LETTURA_Arduino_mex</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">443</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [status,messaggio]  = LETTURA_Arduino_mex(byte_pack)

persistent message counter start_found

status = false;                                        %ho aggiunto questo
messaggio = uint8(zeros(1,31)) ;
M = uint8(length(byte_pack)) ;


if isempty(start_found) 
     start_found = false ;
end 
if isempty (counter) 
    counter = uint8(0) ;
end 
if isempty(message)
     message = uint8(zeros(1,31)) ;
end


if start_found == 0 
    for i = 1 : M-1  
        if ( byte_pack(i) == 255 &amp;&amp;  byte_pack(i + 1) == 254 )                  % mi conviene mandare un secondo byte all&apos;inizio cosi non devo cambiare nulla
            message(1:M - (i-1)) = byte_pack(i:end) ;
            counter = M - (i-1) ; 
            start_found = true ;
            break
        end
    end   % lho messo qua
        if counter == M 
            messaggio = message ;
            message = uint8(zeros(1,31)) ;
            status = true ;
            start_found = false ;
            counter = uint8(0) ;
        end
     %end
    
    
elseif start_found == 1 

        message(counter + 1 : end) = byte_pack(1:M - counter) ;
        status = true;       %ho aggiunto questo
        messaggio = message ;
        counter = M - counter ;
        message = uint8(zeros(1,31)) ;
        
            for i = counter : M-1  
        if ( byte_pack(i) == 255 &amp;&amp;  byte_pack(i + 1) == 254 )                  % mi conviene mandare un secondo byte all&apos;inizio cosi non devo cambiare nulla
            message(1:M - (i-1)) = byte_pack(i:end) ;
            counter = M - (i-1) ; 
            start_found = true ;
            break
        else 
            start_found = false ;
            counter = uint8(0);
        end 
            end

end





% function [status,messaggio]  = LETTURA_Rasp_mex(byte_pack)
% 
% persistent message counter start_found
% 
% status = false;                                        %ho aggiunto questo
% messaggio = uint8(zeros(1,30)) ;
% M = uint8(length(byte_pack)) ;
% 
% if isempty(start_found) 
%      start_found = false ;
% end 
% if isempty (counter) 
%     counter = uint8(0) ;
% end 
% if isempty(message)
%      message = uint8(zeros(1,30 )) ;
% end
% 
% 
% if  start_found == 0  
%     for i = 1 : M-1  
%         if ( byte_pack(i) == 255 &amp;&amp;  byte_pack(i + 1) == 254 ) 
%             message(1:M - (i-1)) = byte_pack(i:end) ;
%             counter = M - (i-1) ; 
%             start_found = true ;
%             break
%         end
%         if counter == M 
%             messaggio = message ;
%             message = uint8(zeros(1,30 )) ;
%             status = true ;
%             start_found = false ;
%             counter = uint8(0) ;
%         end
%      end
    
%     
% elseif start_found == 1 
% 
%         message(counter + 1 : end) = byte_pack(1:M - counter) ;
%         status = true;       %ho aggiunto questo
%         messaggio = message ;
%         counter = M - counter ;
%         message = uint8(zeros(1,30 )) ;
%         message (1 : M-counter ) = byte_pack(counter + 1:end) ;
%         counter = M - counter ;
% 
% end
</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="byte_pack">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="status">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="messaggio">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">443</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">443</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="451">
        <P Name="name">AIR TX/Enable /Chart</P>
        <P Name="windowPosition">[141 30 1510 998]</P>
        <P Name="viewLimits">[-43.825 926.963 -36.273 507.128]</P>
        <P Name="zoomFactor">0.889</P>
        <P Name="screen">[1 1 1366 768 1.333333333333333]</P>
        <P Name="viewObj">451</P>
        <subviewS>
          <P Name="x1">30.675</P>
        </subviewS>
        <P Name="ssIdHighWaterMark">125</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="chartFileNumber">9</P>
        <P Name="saturateOnIntegerOverflow">1</P>
        <P Name="userSpecifiedStateTransitionExecutionOrder">1</P>
        <P Name="disableImplicitCasting">1</P>
        <Children>
          <state SSID="67">
            <P Name="labelString">sendbyte(bt,n)</P>
            <P Name="position">[429.5901 93.7485 123.2292 45.9375]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">451</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <simulink>
              <P Name="isSimulinkFcn">1</P>
              <P Name="blockName">sendbyte</P>
            </simulink>
            <Children>
              <data SSID="68" name="bt">
                <P Name="scope">FUNCTION_INPUT_DATA</P>
                <props>
                  <array>
                    <P Name="size">-1</P>
                  </array>
                  <type>
                    <P Name="primitive">SF_UINT8_TYPE</P>
                    <P Name="isSigned">1</P>
                    <P Name="wordLength">16</P>
                  </type>
                  <P Name="complexity">SF_COMPLEX_INHERITED</P>
                  <P Name="frame">SF_FRAME_INHERITED</P>
                  <unit>
                    <P Name="name">inherit</P>
                  </unit>
                </props>
                <P Name="dataType">uint8</P>
              </data>
              <data SSID="81" name="n">
                <P Name="scope">FUNCTION_INPUT_DATA</P>
                <props>
                  <array>
                    <P Name="size">-1</P>
                  </array>
                  <type>
                    <P Name="method">SF_INHERITED_TYPE</P>
                    <P Name="primitive">SF_DOUBLE_TYPE</P>
                    <P Name="isSigned">1</P>
                    <P Name="wordLength">16</P>
                  </type>
                  <P Name="complexity">SF_COMPLEX_INHERITED</P>
                  <P Name="frame">SF_FRAME_INHERITED</P>
                  <unit>
                    <P Name="name">inherit</P>
                  </unit>
                </props>
                <P Name="dataType">Inherit: Same as Simulink</P>
              </data>
            </Children>
          </state>
          <state SSID="4">
            <P Name="labelString">Inputblock
entry: i=1;</P>
            <P Name="position">[95.03 98.7519 279.0746 188.5957]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">451</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <Children>
              <transition SSID="31">
                <P Name="labelPosition">[205.96 98.949 8.246 14.971]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">4</P>
                  <P Name="intersection">[1 0 1 0.4118 209.9602 98.7519 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">28</P>
                  <P Name="intersection">[1 0 -1 0 209.9602 118.2946 0 0]</P>
                </dst>
                <P Name="midPoint">[209.9602 104.6874]</P>
                <P Name="dataLimits">[207.56 212.36 98.752 118.295]</P>
                <P Name="stampAngle">NaN</P>
                <P Name="subviewer">451</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="37">
                <P Name="labelString">[ i&lt;Len]
{i++;}</P>
                <P Name="labelPosition">[121.643 159.822 39.731 28.444]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">32</P>
                  <P Name="intersection">[4 -0.9487 -0.3162 0 203.3193 195.7247 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">28</P>
                  <P Name="intersection">[4 -0.9487 0.3162 0 203.3193 127.508 0 0]</P>
                </dst>
                <P Name="midPoint">[174.9355 160.6534]</P>
                <P Name="dataLimits">[174.821 203.319 127.508 195.725]</P>
                <P Name="stampAngle">-1.2491</P>
                <P Name="subviewer">451</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                  <P Name="midPointSticky">1</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="34">
                <P Name="labelString">{sendbyte(datain,i);}</P>
                <P Name="labelPosition">[239.992 137.743 104.949 14.971]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">28</P>
                  <P Name="intersection">[3 0.6976 0.7165 0 214.8434 130.3101 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">32</P>
                  <P Name="intersection">[1 0.6976 -0.7165 0 214.8434 192.9226 0 0]</P>
                </dst>
                <P Name="midPoint">[232.5023 161.6164]</P>
                <P Name="dataLimits">[214.843 232.71 130.31 192.923]</P>
                <P Name="stampAngle">-0.772</P>
                <P Name="subviewer">451</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="49">
                <P Name="labelString">{i=1;}</P>
                <P Name="labelPosition">[218.217 213.348 28.486 14.971]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">32</P>
                  <P Name="intersection">[3 0 1 0 209.9602 204.9381 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">48</P>
                  <P Name="intersection">[1 0 -1 0 209.9602 263.2985 0 0]</P>
                </dst>
                <P Name="midPoint">[209.9602 231.1263]</P>
                <P Name="dataLimits">[207.56 212.36 204.938 263.298]</P>
                <P Name="subviewer">451</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">2</P>
              </transition>
              <junction SSID="28">
                <P Name="position">[209.9602 125.2946 7]</P>
                <P Name="subviewer">451</P>
                <P Name="type">CONNECTIVE_JUNCTION</P>
              </junction>
              <junction SSID="32">
                <P Name="position">[209.9602 197.9381 7]</P>
                <P Name="subviewer">451</P>
                <P Name="type">CONNECTIVE_JUNCTION</P>
              </junction>
              <junction SSID="48">
                <P Name="position">[209.9602 270.2985 7]</P>
                <P Name="subviewer">451</P>
                <P Name="type">CONNECTIVE_JUNCTION</P>
              </junction>
            </Children>
          </state>
          <data SSID="14" name="datain">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
                <fixpt>
                  <P Name="lock">1</P>
                </fixpt>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <data SSID="23" name="Len">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT16_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint16</P>
          </data>
          <data SSID="38" name="i">
            <P Name="scope">LOCAL_DATA</P>
            <props>
              <P Name="initialValue">0</P>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <transition SSID="108">
            <P Name="labelPosition">[245.896 78.663 8.246 14.971]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 -0 1 0 249.8958 76.25 0 -9.2187]</P>
            </src>
            <dst>
              <P Name="SSID">4</P>
              <P Name="intersection">[1 0 -1 0.5549 249.8958 98.7519 0 8.5938]</P>
            </dst>
            <P Name="midPoint">[249.8958 83.7294]</P>
            <P Name="dataLimits">[247.496 252.296 76.25 98.752]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">451</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
        </Children>
      </chart>
      <chart id="468">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/Chart1</P>
        <P Name="windowPosition">[0 0 960 1050]</P>
        <P Name="viewLimits">[268.82 2061.82 -2.108 869.892]</P>
        <P Name="zoomFactor">1.333</P>
        <P Name="screen">[1 1 3200 1200 1.25]</P>
        <P Name="viewObj">468</P>
        <P Name="ssIdHighWaterMark">90</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="chartFileNumber">10</P>
        <P Name="allowGlobalAccessToExportedFunctions">0</P>
        <P Name="saturateOnIntegerOverflow">1</P>
        <P Name="userSpecifiedStateTransitionExecutionOrder">1</P>
        <P Name="disableImplicitCasting">1</P>
        <P Name="actionLanguage">2</P>
        <Children>
          <state SSID="73">
            <P Name="labelString">Allignment1
du:
maneuver_selector=1;
landing_selector=0;
trig_approach = 0;
trig_flare = 0;
approach_selector = 0;
</P>
            <P Name="position">[413 169.5688 147 134.6667]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">468</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="85">
            <P Name="labelString">Abort
du:
maneuver_selector=1;
landing_selector=0;
trig_approach = 0;
trig_flare = 0;
approach_selector = 0;
</P>
            <P Name="position">[1564 197.8188 147 134.6667]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">468</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="4">
            <P Name="labelString">Allignment
du:
trig_flare = 0;
approach_selector = 0;
maneuver_selector=1;
landing_selector=0;
trig_approach = 0;
</P>
            <P Name="position">[413 444.5 147 134.6667]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">468</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="5">
            <P Name="labelString">Approach

du:
trig_flare = 0;
trig_approach = 1;
approach_selector = 1;
landing_selector=1;
maneuver_selector=2;
</P>
            <P Name="position">[1135.3333 463.6667 143.3333 143]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">468</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="6">
            <P Name="labelString">Flare
du:
trig_approach = 0;
trig_flare = 1;
approach_selector = 0;
landing_selector=2;
maneuver_selector=3;
</P>
            <P Name="position">[763.6667 742.3333 174.3333 193]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">468</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <data SSID="29" name="h">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="30" name="dist">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="35" name="counter">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="63" name="maneuver_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="64" name="x_e">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="65" name="x_f">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="81" name="h_f">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="69" name="TAS">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="70" name="landing_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="72" name="trig_approach">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="75" name="modo">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="79" name="trig_flare">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="80" name="approach_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="89" name="landing_abort">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="45">
            <P Name="labelString">{maneuver_selector=1;
 landing_selector=0;
 trig_approach = 0;
 trig_flare = 0;
 approach_selector = 1;}</P>
            <P Name="labelPosition">[508.773 47.039 131.656 72]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 -0 1 0 478.7726 20.5093 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">73</P>
              <P Name="intersection">[1 0 -1 0.4474 478.7726 169.5688 0 0]</P>
            </dst>
            <P Name="midPoint">[478.7726 95.039]</P>
            <P Name="dataLimits">[476.373 481.173 20.509 169.569]</P>
            <P Name="subviewer">468</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="77">
            <P Name="labelString">[modo ~= 4]</P>
            <P Name="labelPosition">[1284.495 238.436 65.984 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">5</P>
              <P Name="intersection">[1 0 -1 0.766 1245.1323 463.6667 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">73</P>
              <P Name="intersection">[2 1 0 0.1847 560 194.4364 0 0]</P>
            </dst>
            <P Name="midPoint">[1268.4955 281.4364]</P>
            <P Name="dataLimits">[560 1268.68 126.146 463.667]</P>
            <P Name="subviewer">468</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="78">
            <P Name="labelString">[modo ~= 4]</P>
            <P Name="labelPosition">[65.495 695.436 65.984 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">6</P>
              <P Name="intersection">[4 -1 0 0.0777 763.6667 920.3333 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">73</P>
              <P Name="intersection">[4 -1 -0 0.613 413 221.6864 0 0]</P>
            </dst>
            <P Name="midPoint">[20.4955 625.4364]</P>
            <P Name="dataLimits">[20.726 763.667 219.286 920.333]</P>
            <P Name="subviewer">468</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="76">
            <P Name="labelString">[modo ~= 4]</P>
            <P Name="labelPosition">[253.993 335.368 65.984 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">4</P>
              <P Name="intersection">[4 -1 0 0.6449 413 492.3135 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">73</P>
              <P Name="intersection">[4 -1 0 0.3551 413 256.422 0 0]</P>
            </dst>
            <P Name="midPoint">[349.9932 374.3677]</P>
            <P Name="dataLimits">[349.844 413 254.022 492.313]</P>
            <P Name="subviewer">468</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="86">
            <P Name="labelString">[landing_abort == 1]</P>
            <P Name="labelPosition">[1453.934 389.441 108.656 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">5</P>
              <P Name="intersection">[2 1 0 0.298 1278.6666 506.2836 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">85</P>
              <P Name="intersection">[4 -1 -0 0.3951 1564 279.2836 0 0]</P>
            </dst>
            <P Name="midPoint">[1417.3333 392.7836]</P>
            <P Name="dataLimits">[1278.667 1564 276.884 506.284]</P>
            <P Name="subviewer">468</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">3</P>
          </transition>
          <transition SSID="11">
            <P Name="labelString">[(h &gt; 35) &amp;&amp; (h &lt; 60) &amp;&amp; (dist &lt;= h*(1/tan(3*pi/180))+100) &amp;&amp; (dist &gt;= h*(1/tan(4*pi/180))+100) &amp;&amp; (counter &gt;1)]</P>
            <P Name="labelPosition">[584.644 258.306 592 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">4</P>
              <P Name="intersection">[1 0 -1 0.898 545 444.5 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">5</P>
              <P Name="intersection">[1 0 -1 0.1338 1154.5175 463.6667 0 0]</P>
            </dst>
            <P Name="midPoint">[849.7587 297.6784]</P>
            <P Name="dataLimits">[545 1156.918 297.672 463.667]</P>
            <P Name="subviewer">468</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="74">
            <P Name="labelString">[modo == 4]</P>
            <P Name="labelPosition">[486.5 374.368 65.984 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">73</P>
              <P Name="intersection">[3 0 1 0.5 486.5 304.2355 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">4</P>
              <P Name="intersection">[1 0 -1 0.5 486.5 444.5 0 0]</P>
            </dst>
            <P Name="midPoint">[486.5 374.3677]</P>
            <P Name="dataLimits">[484.1 488.9 304.236 444.5]</P>
            <P Name="subviewer">468</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="12">
            <P Name="labelString">[ (x_e &gt;= x_f) &amp;&amp; ((h &lt;= (h_f + 1.5)) ||( h &gt; (h_f - 1)))]</P>
            <P Name="labelPosition">[1089.648 732.989 279.969 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">5</P>
              <P Name="intersection">[3 0 1 0.8848 1151.8508 606.6667 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">6</P>
              <P Name="intersection">[2 1 0 0.1741 938 775.9442 0 0]</P>
            </dst>
            <P Name="midPoint">[1082.2396 724.6197]</P>
            <P Name="dataLimits">[938 1151.851 606.667 778.344]</P>
            <P Name="subviewer">468</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="68">
            <P Name="labelString">[TAS &lt; 3]{landing_selector=0;}</P>
            <P Name="labelPosition">[561.931 764.823 163.75 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">6</P>
              <P Name="intersection">[4 -1 0 0.7073 763.6667 798.8333 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">67</P>
              <P Name="intersection">[2 1 0 0 493.5 798.8333 0 0]</P>
            </dst>
            <P Name="midPoint">[632.5833 798.8333]</P>
            <P Name="dataLimits">[493.5 763.667 796.433 801.233]</P>
            <P Name="subviewer">468</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="67">
            <P Name="position">[486.5 798.8333 7]</P>
            <P Name="visible">0</P>
            <P Name="subviewer">468</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="499">
        <P Name="name">AIR TX/Heartbeat/Alarm set</P>
        <P Name="windowPosition">[661 134.75 213 385]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 1366 768 1.333333333333333]</P>
        <P Name="viewObj">499</P>
        <P Name="ssIdHighWaterMark">7</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">11</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">Allarm_set</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">499</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">
%%

function H_mav = Allarm_set(Alarm, Rx_mode)
%#cambia lo stato se c&apos; un allarme attivo
% Allarm: possibili allarmi proveniente dall&apos;autopilota
% Rx_mode: richiesta da parte della stazione di terra
% H_mav: setto i parametri Base_mode e System_status del Heartbeat


H_mav = uint8(Rx_mode); % setta la modalit con quella ricevuta da terra

% se un allarme si attiva ha la precedenza sulla richiesta della QGC

if Alarm(1) == 1 % ovvero l&apos;aereo  entrato in safe e si pone su traettoria circolare di sicurezza
    
    H_mav(1) = uint8(220); % MAV_MODE_AUTO_ARMED
    H_mav(2) = uint8(5);   % MAV_STATE_CRITICAL
%     H_mav(3) = uint8(128); % MAV_MODE_FLAG_SAFETY_ARMED

end

% se l&apos;allareme di intervento pilota  attivo ha precedenza sull&apos;allarm
% sefe per cui bisogna riscrivere lo stato del pilota

if Alarm(2) == 1 % si  attivato l&apos;allarme dell&apos;intervento pilota 
    
    H_mav(1) = uint8(216); % MAV_MODE_GUIDED_ARMED
    H_mav(2) = uint8(4);   % MAV_STATE_ACTIVE
%     H_mav(3) = uint8(8);   % MAV_MODE_FLAG_GUIDED_ENABLED

end

</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="Alarm">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="H_mav">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="Rx_mode">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">499</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">499</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="507">
        <P Name="name">AIR TX/If_subsystem/iflogic_function</P>
        <P Name="windowPosition">[741 134.75 213 385]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 1366 768 1.333333333333333]</P>
        <P Name="viewObj">507</P>
        <P Name="ssIdHighWaterMark">7</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">12</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">507</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function iflogic = fcn(H50,H10)
%#codegen
% prende in ingeresso i counter che contano il tempo
% e dice quale messaggio bisogna inviare in base alle frequenze scelte in
% Heartbeat:            1Hz
% SCALED_IMU:           20Hz
%attitude:              20Hz
%GLOBAL_POSITION_INT:   1Hz
%SYS_STATUS:            3Hz
%VFR_HUD:               2Hz
%SERVO_OUTPUT_RAW       1Hz
%SCALED_PRESSURE        1Hz

if H50 == 1  || H50==3
    iflogic=uint8(26); % SCALED_IMU 20Hz
elseif H50==2 || H50==4
    iflogic=uint8(30); %attitude 20Hz
elseif  H50==0 &amp;&amp; H10==2
    iflogic=uint8(33); %GLOBAL_POSITION_INT 1Hz
elseif  H50==0 &amp;&amp; H10==6
    iflogic=uint8(34); %GLOBAL_POSITION_INT_RAW 1Hz
elseif  H50==0 &amp;&amp; H10==0
    iflogic=uint8(0); %Heartbeat 1Hz
elseif H50==0 &amp;&amp; (H10==1 || H10==5 || H10==9)
    iflogic=uint8(1); %SYS_STATUS 3Hz
elseif H50==0 &amp;&amp; (H10==3 || H10==8)
    iflogic=uint8(74); %VFR_HUD 2Hz
elseif H50==0 &amp;&amp; (H10==7)
    iflogic=uint8(36); %SERVO_OUTPUT_RAW 1Hz
elseif H50==0 &amp;&amp; (H10==4)
    iflogic=uint8(29); %SCALED_PRESSURE 1Hz
else
    iflogic=uint8(255); %non esiste nessun messaggio con questo codice
    
end

</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="H50">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="iflogic">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="H10">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">507</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">507</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="515">
        <P Name="name">AIR TX/Waypoints/MATLAB Function</P>
        <P Name="windowPosition">[481 60 213 385]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 1366 768 1.333333333333333]</P>
        <P Name="viewObj">515</P>
        <P Name="ssIdHighWaterMark">8</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">13</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">515</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [WP_info,WP_param] = fcn(WP_info_in,WP_param_in, GC_info)
%#codegen
WP_info=WP_info_in(1,:); %%per sicurezza
WP_param=WP_param_in(1,:); %%per sicurezza
[m,n]=size(WP_info_in);
if GC_info(1)==2
    if GC_info(2)&gt;=0 &amp;&amp; GC_info(2)&lt;m %per poter inviare i MISSION_ITEM
        WP_info=WP_info_in(GC_info(2)+1,:);
        WP_param=WP_param_in(GC_info(2)+1,:);
    end
end
if GC_info(1)==3 &amp;&amp; GC_info(2)&gt;=0 &amp;&amp; GC_info(2)&lt;200 %per poter inviae i MISSION_REQUEST
    WP_info=WP_info_in(GC_info(2)+1,:);
end
</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="WP_info_in">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="WP_param_in">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="WP_info">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="GC_info">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="WP_param">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">515</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">515</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="525">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem/VETTORIALE</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">525</P>
        <P Name="ssIdHighWaterMark">39</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">14</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">vettoriale</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">525</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [V_vett, h_vett, rotta_vett, RC_vett, ingaggio_AP_mem, modo_pre_mem, IAS_pre_mem, ALT_pre_mem, HDG_pre_mem] = vettoriale(modo, IAS, ALT, HDG, I_RC, ingaggio_AP ,ROTTA, VELOCITA, QUOTA, RC, HEADING, TAS, h, RC_default, ingaggio_AP_pre,modo_pre, IAS_pre, ALT_pre, HDG_pre)
%#codegen

persistent V_ref ALT_ref HDG_ref

if isempty(V_ref)
    
    V_ref = 0;
    
end

if isempty(ALT_ref)
    
    ALT_ref = 0;
    
end

if isempty(HDG_ref)
    
    HDG_ref = 0;
    
end

if (ingaggio_AP ~= ingaggio_AP_pre || modo ~= modo_pre || IAS ~= IAS_pre)
    
    V_ref = TAS;
    
end

if (ingaggio_AP ~= ingaggio_AP_pre || modo ~= modo_pre || ALT ~= ALT_pre)
    
    ALT_ref = h;
    
end

if (ingaggio_AP ~= ingaggio_AP_pre || modo ~= modo_pre || HDG ~= HDG_pre)
    
    HDG_ref = HEADING;
    
end

if (IAS == 1)
    
    V_vett = VELOCITA;
    
else
    
    V_vett = V_ref;
    
end

if (ALT == 1)
    
    h_vett = QUOTA;
    
else
    
   h_vett = ALT_ref;
    
end

if (HDG == 1)
    
    rotta_vett = ROTTA;
    
else
    
  rotta_vett = HDG_ref;
    
end

RC_vett = 0;

if ((h_vett - h) &gt;= 0) 
    
    if (I_RC == 1)
    
        RC_vett = RC;
    
    else
    
        RC_vett = RC_default;
    
    end
    
elseif ((h_vett - h) &lt; 0 ) 
    
    if (I_RC == 1)
    
        RC_vett = -RC;
    
    else
    
        RC_vett = -RC_default;
    
    end 
    
end
    
ingaggio_AP_mem = uint8(ingaggio_AP);
modo_pre_mem = modo;
IAS_pre_mem  = uint8(IAS);
ALT_pre_mem  = uint8(ALT);
HDG_pre_mem  = uint8(HDG);





</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="31" name="V_vett">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="32" name="h_vett">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="33" name="rotta_vett">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="34" name="RC_vett">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="38" name="ingaggio_AP_mem">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="19" name="modo">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="4" name="IAS">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="ALT">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="HDG">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="20" name="I_RC">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="36" name="ingaggio_AP">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="ROTTA">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="VELOCITA">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="QUOTA">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="11" name="RC">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="12" name="HEADING">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="13" name="TAS">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="14" name="h">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="15" name="RC_default">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="39" name="ingaggio_AP_pre">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <data SSID="21" name="modo_pre">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="22" name="IAS_pre">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <data SSID="23" name="ALT_pre">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <data SSID="25" name="HDG_pre">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <data SSID="26" name="modo_pre_mem">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="27" name="IAS_pre_mem">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <data SSID="28" name="ALT_pre_mem">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <data SSID="29" name="HDG_pre_mem">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">525</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">525</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="558">
        <P Name="name">Misure Sensori/BMP_280/MATLAB Function1</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">558</P>
        <P Name="ssIdHighWaterMark">10</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">15</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">558</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function h_  = fcn( T_0, P_ref,P)
%#codegen

g     = 9.81;    %accelerazione di gravit
R_gas = 287.05;  %costante dei gas perfetti
dTdh  = -0.0065; %gradiente termico verticale in atmosfera standard 

T_0        = T_0+273.15;


    
h_ = ((R_gas/g)*log(P_ref/P)*T_0)/(1-(dTdh*0.5*(R_gas/g)*log(P_ref/P)));

</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="9" name="T_0">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="P_ref">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="h_">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="P">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">558</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">558</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="567">
        <P Name="name">AIR RX/MATLAB Function1</P>
        <P Name="windowPosition">[721 134.75 213 385]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 1366 768 1.333333333333333]</P>
        <P Name="viewObj">567</P>
        <P Name="ssIdHighWaterMark">38</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">16</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">RXelaborazione</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">567</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [AP_int, AP_rif, H_mav, SyS_data, GC_info, WP_db_out, WP_db_param,WP_AL, Val_out_MAV, T_0, Base_mode_to_SF, test] =...
    RXelaborazione(Base_mode, GC_req, value_c, WP_info_in, WP_param_in, mem_out, T_number, T_ref, Mav_state, AP_int_mem)
%#codegen
% PARTE PER LA GESTIONE DELLE RICHIESTE DALLA STAZIONE DI TERRA
% GC_req= richiesta della stazione di terra, vettore 2 componenti
%           GC_req(1)=1 :    inviare i parametri a fronte della ricezione del
%                           SET_Request
%                             se GC_req(2)=255 li invia tutti altrimenti
%                             solo 1
% value_c= valore da aggiornare;
% GC_info= necessario per S-function mavlink di trasmissione dipende dal
%               GC_req ricevuto
% WP_db_info= [WP_item255.count,WP_item255.seq,WP_item255.command,WP_item255.frame,
%               WP_item255.current,WP_info[5]=WP_item255.autocontinue]
% WP_db_param= parametri ultimo wp arrivato
% Val_out_MAV= valori aggiornati in uscita per il mavlink di trasmissione
% 
%  mem_out=[msg.sysid; msg.compid;msg.msgid;msg.len;msg.seq;flag]
%
% PARTE PER LA GESTIONE MANUALE AUTOMATICO
%Base_mode: richiesta da parte della stazione di terra di settare una
%           modalit di volo
%H_mav: setto i parametri Base_mode e System_status del Heartbeat di
%           trasmissione
%
%  VARIABILI NECESSARIE ALL&apos;AUTOPILOTA
%AP_interruttori: interruttore di pilota automatico e manuale e modalit
%            [ manuale automatico HDG IAS ALT RC]
%
%AP_riferimenti: valori delle modalit di volo [HDG IAS ALT RC]

persistent riferimenti   % riferimenti delle modalit di volo
persistent WP_dbP WP_dbI WP_dbP_AL % lista dei parametri dei waypoint
persistent test1

nWPmax = uint16(6); % Numero massimo di WP da memorizzare %[MILONE]

% Inizializzazione

if isempty(riferimenti)
    
    riferimenti = single([0; 0; 0; 0; 0; 0; 0; 0; 20; 100; 2; 101325; 15; 0; 0; 0]) ; %valori di riferimento di [&quot;I_HDG&quot;, &quot;I_IAS&quot;, &quot;I_ALT&quot;, &quot;I_RC&quot;, &quot;I_WP&quot;, &quot;I_ATO&quot;, &quot;I_AL&quot; &quot;V_HDG&quot;,&quot;V_IAS&quot;,&quot;V_ALT&quot;,&quot;V_RC&quot;,&quot;C_P0&quot;,&quot;C_T0&quot;,&quot;H_LAT&quot;,&quot;H_LONG&quot;,&quot;H_ALT&quot;};]
    
end

if isempty(WP_dbP) || (GC_req(1) == 3 &amp;&amp; GC_req(2) == 250)
    
        WP_dbP = single(zeros(nWPmax,7)); % nWPmax righe e 7 colonne
        WP_dbI = uint16(zeros(nWPmax,6)); % nWPmax righe e 6 colonne
        
        
end
if isempty(WP_dbP_AL) || (GC_req(1) == 3 &amp;&amp; GC_req(2) == 250)                % introdotto da Sensolini: consente di inviare contemporaneamente wp di navigazione ed atterraggio
    
        WP_dbP_AL = single(zeros(nWPmax,7)); % nWPmax righe e 7 colonne
              
end

if isempty(test1)
    
    test1 = 0;
    
end


%% Parte di richieste da mavlik relativa al messaggio PARAM_SET

GC_info = [GC_req; mem_out(1)]; % GC_req (vettore di due) sarebbe GC_request nella S-Function ed  usato per la funzione di PARAM_SET; 
                                % mem_out(1) sarebbe nella S-Function mem_out[0]=msg.sysid; cio chi interroga

if GC_info(1) == 1
    
    if GC_info(2) &gt; 0 &amp;&amp; GC_info(2) &lt;= 7
        
        if abs(value_c) &gt; 0 % attiva l&apos;interruttore
            
            riferimenti(GC_info(2)) = single(1);
            
            %NB: se arrivano valori maggiori di 1 sempre 1 da in output perch
            % gli interruttori possono essere solo di tipo 0/1
            % altrimenti l&apos;autopilota si blocca
            
        elseif value_c == 0 % disattiva l&apos;interruttore
            
            riferimenti(GC_info(2)) = single(0);
            
        end
        
    elseif GC_info(2) &gt; 7 &amp;&amp; GC_info(2) &lt; 12
        
        riferimenti(GC_info(2)) = single(value_c);
        
    end
    
end

%% Parte relativa al messaggio COMMAND_LONG per la temperatura di riferimento dell&apos;altimetro

if T_number == 13;
    
        riferimenti(T_number) = T_ref;
        
end

%%

Val_out_MAV = riferimenti; % output riferimenti

%% WP set

if GC_info(1) == 3 &amp;&amp; GC_info(2) == 200 % arriva il numero dei waypoint
    
     if WP_info_in(1) &gt; nWPmax  %%%ATTENZIONE!!  %[MILONE]
        WP_info_in(1) = nWPmax; % se nWP&gt;nWPmax mi comporto come se avessi ricevuto solo i primi nWPmax
                                % non  ottimale, infatti QGC deve aspettare il time out, ma funziona
                                % va migliorata con una opportuna segnalazione
     end
     
     WP_dbI(:,1) = WP_info_in(1);
     
end

if GC_info(1) == 3 &amp;&amp; GC_info(2) &lt; 200 %  arrivato un waypoint
    
    if WP_param_in(2) == 0
    
    WP_dbP(WP_info_in(2)+1,:)   = single(WP_param_in); % 7Parametri.  arrivato il numero WP_info(2) +1 perch in C si parte da 0
    WP_dbI(WP_info_in(2)+1,2:7) = WP_info_in(2:7);     % 6informazioni.  arrivato il numero WP_info(2)  +1 perch in C si parte da 0
    
    else
     WP_dbP_AL(WP_param_in(1)+1,:) = single(WP_param_in);
     WP_dbI(WP_info_in(2)+1,2:7) = WP_info_in(2:7);
     
    end
    
end

WP_db_out   = WP_dbI;

WP_db_param = WP_dbP;
WP_AL = WP_dbP_AL;

%for i=1:WP_info_in(1)
%if WP_dbP(WP_info_in(2)+1,2) == 0
%    WP_db_param = WP_dbP;
%    WP_AL = single(zeros(nWPmax,7));
%else
%    WP_db_param = single(zeros(nWPmax,7));
%    WP_AL = WP_dbP;
%end
%end
%% parte di gestione modalit autopilota

H_mav   = uint8(zeros(2,1)); % inizializzo il vettore di output
AP_mode = uint8([0;0]);      % inizializzo il vettore che gli interrutori manuale e automatico

Base_mode_to_SF = uint8(0);

% setto i parametri necessari per l&apos;hearbeat e per l&apos;autopilota

if Base_mode == uint8(0) &amp;&amp; Mav_state == uint8(0) % INIZIO:  la condizione che si verifica quando connetto Arduino a QGC, ovvero l&apos;autopilota  in stato Standby
    
    H_mav(1) = uint8(0);         % MAV_MODE_PREFLIGHT
    H_mav(2) = uint8(3);         % MAV_STATE_STANDBY
%     H_mav(3) = uint8(64);        % MAV_MODE_FLAG_MANUAL_INPUT_ENABLED   %% il MAV_MODE_FLAG  commentato perch non lo utilizziamo dato che inviamo nel messaggio dell&apos;heartbeat il MAV_MODE in corrispondenza del valore di base_mode (vedere la pagina web MAV&apos;RIC)
    AP_mode  = uint8([1; 0]);    % attivo il manuale  spengo l&apos;automatico
    Base_mode_to_SF = uint8(0);

elseif Base_mode == uint8(0) &amp;&amp; Mav_state == uint8(3) %  arrivato MAV_MODE_PREFLIGHT e MAV_STATE_STANDBY (modalit Ready)
    
    H_mav(1) = uint8(0);         % MAV_MODE_PREFLIGHT
    H_mav(2) = uint8(3);         % MAV_STATE_STANDBY
%     H_mav(3) = uint8(64);        % MAV_MODE_FLAG_MANUAL_INPUT_ENABLED 
    AP_mode  = uint8([1; 0]);    % attivo il manuale  spengo l&apos;automatico
    Base_mode_to_SF = uint8(0);
    test1 = 0;

elseif Base_mode == uint8(0) &amp;&amp; Mav_state == uint8(2) %  arrivato MAV_MODE_PREFLIGHT e MAV_STATE_CALIBRATING
    
    H_mav(1) = uint8(0);         % MAV_MODE_PREFLIGHT
    H_mav(2) = uint8(2);         % MAV_STATE_CALIBRATING
%     H_mav(3) = uint8(64);        % MAV_MODE_FLAG_MANUAL_INPUT_ENABLED
    AP_mode  = uint8([1; 0]);    % attivo il manuale  spengo l&apos;automatico
    Base_mode_to_SF = uint8(0);
    test1 = 0;
    
elseif Base_mode == uint8(0) &amp;&amp; Mav_state == uint8(1) %  arrivato MAV_MODE_PREFLIGHT e MAV_STATE_BOOT
    
    H_mav(1) = uint8(0);         % MAV_MODE_PREFLIGHT
    H_mav(2) = uint8(1);         % MAV_STATE_BOOT
%     H_mav(3) = uint8(64);        % MAV_MODE_FLAG_MANUAL_INPUT_ENABLED
    AP_mode  = uint8([0; 1]);    % In questo caso si attiva l&apos;interrutore di modalit automatica. 
                                 % Il motivo  dovuto al fatto che per fare la prova del safe  necessario che sia attivo 
                                 % il modo automatico altrimenti il safe non entra.
    Base_mode_to_SF = uint8(0);
    test1 = 1;
    
% elseif Base_mode==uint8(80)  % arrivato MAV_MODE_STABILIZE_DISARMED, 1 manual in QGC
%     H_mav(1)=uint8(80);        %MAV_MODE_GUIDED_ARMED
%     H_mav(2)=uint8(4);          %MAV_STATE_ACTIVE
%     AP_mode=uint8([1; 0]);      %attivo il manuale  spengo l&apos;automatico

elseif Base_mode == uint8(192) %  arrivato MAV_MODE_MANUAL_ARMED
    
    H_mav(1) = uint8(192);       % MAV_MODE_MANUAL_ARMED 
    H_mav(2) = uint8(4);         % MAV_STATE_ACTIVE
%     H_mav(3) = uint8(64);        % MAV_MODE_FLAG_MANUAL_INPUT_ENABLED
    AP_mode  = uint8([1; 0]);    % attivo il manuale  spengo l&apos;automatico
    Base_mode_to_SF = uint8(192);
    
elseif Base_mode == uint8(208) %  arrivato MAV_MODE_STABILIZE_ARMED (sarebbe la modalit Stand By presente nello State Flow degli stati)
    
    H_mav(1) = uint8(208);       % MAV_MODE_STABILIZE_ARMED
    H_mav(2) = uint8(3);         % MAV_STATE_STANDBY
%     H_mav(3) = uint8(64);        % MAV_MODE_FLAG_MANUAL_INPUT_ENABLED
    AP_mode  = uint8([0; 0]);    % disattiva l&apos;interruttore del manuale ma l&apos;automatico non  ancora attivo
    Base_mode_to_SF = uint8(208);

elseif Base_mode == uint8(220) &amp;&amp; Mav_state ~= uint8(5) %  arrivato MAV_MODE_AUTO_ARMED
    
    if (AP_int_mem(1) == uint8(0) &amp;&amp; AP_int_mem(2) == uint8(0) &amp;&amp; ((AP_int_mem(3) == uint8(1) || AP_int_mem(4) == uint8(1) ||...
        AP_int_mem(5) == uint8(1) || AP_int_mem(6) == uint8(1) || AP_int_mem(7) == uint8(1) || AP_int_mem(8) == uint8(1))))
    
        H_mav(1) = uint8(220);       % MAV_MODE_AUTO_ARMED
        H_mav(2) = uint8(4);         % MAV_STATE_ACTIVE
%         H_mav(3) = uint8(4);         % MAV_MODE_FLAG_AUTO_ENABLED
        AP_mode  = uint8([0; 1]);    % spengo il manuale attivo l&apos;automatico
        Base_mode_to_SF = uint8(220);
        
    elseif (AP_int_mem(1) == uint8(0) &amp;&amp; AP_int_mem(2) == uint8(1) &amp;&amp; ((AP_int_mem(3) == uint8(1) || AP_int_mem(4) == uint8(1) ||...
            AP_int_mem(5) == uint8(1) || AP_int_mem(6) == uint8(1) || AP_int_mem(7) == uint8(1) || AP_int_mem(8) == uint8(1)))) 
        
        H_mav(1) = uint8(220);       % MAV_MODE_AUTO_ARMED
        H_mav(2) = uint8(4);         % MAV_STATE_ACTIVE
        AP_mode  = uint8([0; 1]);    % spengo il manuale attivo l&apos;automatico
        Base_mode_to_SF = uint8(220);
        
    else 
        
        H_mav(1)  = uint8(208);       % MAV_MODE_STABILIZE_ARMED
        H_mav(2)  = uint8(3);         % MAV_STATE_STANDBY
        AP_mode   = uint8([0; 0]);    % attivo il manuale  spengo l&apos;automatico
        Base_mode_to_SF = uint8(208);
    
    end

% elseif Base_mode == uint8(216)  %  arrivato MAV_MODE_GUIDED_ARMED
%     
%     H_mav(1) = uint8(8);         % MAV_MODE_FLAG_GUIDED_ENABLED
%     H_mav(2) = uint8(4);         % MAV_STATE_ACTIVE
%     AP_mode  = uint8([0; 1]);    % spengo il manuale attivo l&apos;automatico
    
elseif Mav_state == uint8(5)  % si verifica nell&apos;S-Function di ricezione quando il velivolo  andato in safe ovvero quando Alarm_Safe = 1
    
    H_mav(1) = uint8(220);      % MAV_MODE_AUTO_ARMED
    H_mav(2) = uint8(5);        % MAV_STATE_CRITICAL
%     H_mav(3) = uint8(128);      % MAV_MODE_FLAG_SAFETY_ARMED
    AP_mode  = uint8([0; 1]);   % spengo il manuale attivo l&apos;automatico

% elseif Base_mode==uint8(66) %  arrivato MAV_MODE_TEST_DISARMED, lo usiamo per fare la calibrazione
%     H_mav(1)=uint8(64);        %MAV_MODE_FLAG_MANUAL_INPUT_ENABLED
%     H_mav(2)=uint8(2);         %MAV_STATE_CALIBRATING
%     AP_mode=uint8([1; 0]);     %attivo il manuale  spengo l&apos;automatico
    
    %%%%%%%%%%%%%%%%%%%%%%%%%%%
    % elseif Base_mode==uint8(192) %%ARMED PREFLIGHT
    %     H_mav(1)=uint8(192);        %MAV_MODE_FLAG_MANUAL_INPUT_ENABLED
    %     H_mav(2)=uint8(3);          %	MAV_STATE_EMERGENCY
    %     AP_mode=uint8([0; 1]);     %spengo il manuale attivo l&apos;automatico
    %     elseif Base_mode==uint8(64) %%DISARMED PREFLIGHT
    %     H_mav(1)=uint8(64);        %MAV_MODE_FLAG_MANUAL_INPUT_ENABLED
    %     H_mav(2)=uint8(3);          %	MAV_STATE_EMERGENCY
    %     AP_mode=uint8([0; 1]);     %spengo il manuale attivo l&apos;automatico
    %     %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

else
    
    H_mav(1) = uint8(192);       % MAV_MODE_MANUAL_ARMED 
    H_mav(2) = uint8(6);         % MAV_STATE_EMERGENCY
%     H_mav(3) = uint8(64);        % MAV_MODE_FLAG_MANUAL_INPUT_ENABLED
    AP_mode  = uint8([1; 0]);    % attivo il manuale  spengo l&apos;automatico
    
end

%% parte delle informazioni sullo stato del sistema in ricezione

% calcolo dei messaggi persi provenienti dalla stazione di terra

drop_rate = 10*((100*mem_out(6))/mem_out(5));  % 10*percentuale !non moltipilicare direttamente per 10000 perch  un uint16 e va in overflow
SyS_data  = [drop_rate mem_out(7) mem_out(3)];

%% parte per settare gli interrutori e i riferimenti

AP_int = [AP_mode; uint8(riferimenti(1:7))]; % interruttori
AP_rif = riferimenti(8:11);                  % riferimenti

T_0 = riferimenti(13); % valore della temperatura di riferimento T_0 dell&apos;altimetro

test = test1;








</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="14" name="Base_mode">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="4" name="GC_req">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="value_c">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="17" name="WP_info_in">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="19" name="WP_param_in">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="20" name="mem_out">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="25" name="T_number">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="26" name="T_ref">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="27" name="Mav_state">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="15" name="AP_int">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="16" name="AP_rif">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="13" name="H_mav">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="18" name="SyS_data">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="GC_info">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="21" name="WP_db_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="22" name="WP_db_param">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="38" name="WP_AL">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="Val_out_MAV">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="28" name="T_0">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="31" name="AP_int_mem">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="33" name="Base_mode_to_SF">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="34" name="test">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">567</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">567</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="594">
        <P Name="name">Misure Sensori/X-Sense MTi/MATLAB Function1</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">594</P>
        <P Name="ssIdHighWaterMark">7</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">18</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">checksum_control</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">594</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [Mex_out,Control]  = checksum_control(Messaggio,Mex_prec)

Control = uint8(0);

mti_string = uint8(Messaggio(2:41));

checksum = sum(mti_string) ; 

hex_checksum = dec2hex(checksum);

if ((hex_checksum(3) == &apos;0&apos;) &amp;&amp; (hex_checksum(4) == &apos;0&apos;))
    Mex_out = uint8(Messaggio);

else
   Control = uint8(1); 
   Mex_out = Mex_prec;   
end



end





</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="Messaggio">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="Mex_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="Mex_prec">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="Control">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">594</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">594</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="603">
        <P Name="name">AIR RX/MATLAB Function4</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">603</P>
        <P Name="ssIdHighWaterMark">10</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">19</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">Creazione_mavlink_message_2</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">603</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [status,messaggio,messaggio_2]  = Creazione_mavlink_message_2(byte_pack,byte_available)


persistent Interr_parz  message counter len_found mess_len

if isempty(Interr_parz)
    Interr_parz = false ;
end
if isempty(message)
     message = uint8(zeros(1,100 )) ;
end
if isempty (counter) 
    counter = uint8(0) ;    % variabile che conta quanti byte mancano per completare il messaggio
end 

if isempty(len_found) 
     len_found = false ;
end 

if isempty(mess_len) 
     mess_len = 0 ;
end 

status = 0;
M = length(byte_pack) ;
caso = 0 ;
messaggio = uint8(zeros(1,100 )) ;
messaggio_2 = uint8(zeros(1,100 )) ;
% LA VARIABILE INTERR_PARZ va attivata a 1 alla fine della funzone di
% lettura per indicare di leggere il successivo messaggio in arrivo 

[poss_254,num_254] = find_254(byte_pack) ;

if ((Interr_parz == true) &amp;&amp; (num_254 == 1))                  % in questo caso verifico che il 254 sia effettivamente un altro inizio
if (poss_254(1) ~= counter+1)
   num_254 = 0; 
end
    
end



if ( num_254 == 1 &amp;&amp; Interr_parz == false )             
    caso = 1 ;                                                            % 1 Messaggio Intero   o parziale che inizia                % attivare alla fine della funzione Interr_parz == true o false 
elseif (num_254 == 0 &amp;&amp; Interr_parz == true )
    caso = 2 ;                                                        % 1 Messaggio Parziale senza inizio e poi nulla 
elseif (num_254 == 1 &amp;&amp; Interr_parz == true )                         
    caso = 3 ;                                                        % 1 Messaggio Parziale e poi un altro messaggio completo o parziale
elseif  ( num_254 == 2 &amp;&amp; Interr_parz == false ) 
    caso = 4 ;                                                         % Due messaggi completi  oppure 1 Completo + parziale ( attivare Interr_parz alla fine del codice)
end


switch (caso)
   
    
    
    case 1 
        pos_254 = poss_254(num_254) ;
        
        if pos_254 == M                                                                          % se il 254 sta alla fine 
             message(1) = byte_pack(pos_254)  ;
            len_found = false ;
            Interr_parz = true ;
        else
             len = byte_pack(pos_254 + 1)  ;
             if len &lt;= 100
             if  ((byte_pack(poss_254(1)+1) + 8) == byte_available)                                             % se abbiamo tutto il messaggio all&apos;interno del byte_pack
                message(1: 8 + len ) = byte_pack(pos_254 : pos_254 + (7+len) ) ;          % era cosi byte_pack(pos_254 : pos_254 + (8+len) ) ;
                messaggio = message ;
                status = 1 ;
                message = uint8(zeros(1,100 )) ;
                counter = uint8(0) ;
                len_found = true ;
                mess_len = 0 ;
             elseif ((byte_pack(poss_254(1)+1) + 8) &gt; byte_available)
                mess_len = double(byte_available) ;                                       % lunghezza del messaggio da leggere dal byte_pack ( non uguale alla lunghezza del messaggio complessivo)
                message(1 : mess_len) = byte_pack(pos_254 : mess_len ) ;
                len_found = true ;
                counter = 8 + len - mess_len ;
                Interr_parz = true ;
             end
             else
                 messaggio = uint8(zeros(1,100 )) ;              
                 Interr_parz = false;
                 message = uint8(zeros(1,100 )) ;
                 counter = uint8(0) ;
                 len_found = false ;
                 mess_len = 0 ; 
                 status = 1 ;
             end   
             
        end
        
        
        
        
    case 2 
        
                                     % se la lunghezza  stata trovata e quindi ho il valore di counter che indica quante componenti mancano
           if byte_pack ~= 0
                message(mess_len + 1 : mess_len + counter) = byte_pack( 1 : counter) ;
                Interr_parz = false ;
                messaggio = message ;
                status = 1 ;
                message = uint8(zeros(1,100 )) ;
                len_found = true ;
                mess_len = 0 ;
                counter = uint8(0) ;
                
           else                                                    % se ho un messaggio parziale e nello step successivo non ricevo nulla allora azzero tutto, altrimenti entro in un loop infinito di messaggi sbagliati
                Interr_parz = false ;
                messaggio = uint8(zeros(1,100)) ;
                status = 1 ;
                message = uint8(zeros(1,100 )) ;
                len_found = true ;
                mess_len = 0 ;
                counter = uint8(0) ;  
           end        
        
        

  
        
    case 3 
        
                                     % se la lunghezza  stata trovata e quindi ho il valore di counter che indica quante componenti mancano
        pos_254 = poss_254(num_254) ;
        
                message(mess_len + 1 : mess_len + counter) = byte_pack( 1 : counter) ;
                Interr_parz = false ;
                messaggio = message ;
                status = 1 ;
                message = uint8(zeros(1,100 )) ;
                len_found = true ;
                mess_len = 0 ;
                counter = uint8(0) ;
                
             len = byte_pack(pos_254 + 1)  ;
             if len &lt;= 100
             if  ((byte_pack(poss_254(1)+1) + 8) == uint8(byte_available-double(counter)))                                             % se abbiamo tutto il messaggio all&apos;interno del byte_pack
                message(1: 8 + len ) = byte_pack(pos_254 : pos_254 + (7+len) ) ;          % era cosi byte_pack(pos_254 : pos_254 + (8+len) ) ;
                messaggio_2 = message ;
                status = 1 ;
                message = uint8(zeros(1,100 )) ;
                counter = uint8(0) ;
                len_found = true ;
                mess_len = 0 ;
             elseif ((byte_pack(poss_254(1)+1) + 8) &gt; (uint8(byte_available)-counter))
                mess_len = double(byte_available) - double(counter) ;                                       % lunghezza del messaggio da leggere dal byte_pack ( non uguale alla lunghezza del messaggio complessivo)
                message(1 : mess_len) = byte_pack(pos_254 : mess_len ) ;
                len_found = true ;
                counter = 8 + len - mess_len ;
                Interr_parz = true ;
             end
             else
                 messaggio = uint8(zeros(1,100 )) ;              
                 Interr_parz = false;
                 message = uint8(zeros(1,100 )) ;
                 counter = uint8(0) ;
                 len_found = false ;
                 mess_len = 0 ; 
                 status = 1 ;
             end
                
      
            
        
        
        
      
        
        
    case 4
        primo_254 = poss_254(1) ;
        secondo_254 = poss_254(2) ;
        len_primo = byte_pack(primo_254 + 1) ;
    %    messaggio(1 : len_primo + 8) = byte_pack(primo_254 : primo_254 + (len_primo + 7)) ;           %era cosi      byte_pack(primo_254 : secondo_254 - 1)  ;

        if len_primo &lt;= 100
        messaggio(1 : len_primo + 8) = byte_pack(primo_254 : primo_254 + (len_primo + 7)) ;             %era cosi      byte_pack(primo_254 : secondo_254 - 1)  ;
        else
        messaggio = uint8(zeros(1,100 )) ;
        Interr_parz = false;
        message = uint8(zeros(1,100 )) ;
        counter = uint8(0) ;
        len_found = false ;
        mess_len = 0 ;
        end
        
        status = 1;
        
             len = byte_pack(secondo_254 + 1)  ;
             if (len &lt;= 100 &amp;&amp; (secondo_254-primo_254 &gt; 3))
             if ( (byte_available - ( secondo_254))  == 7 + len    )                                         % se abbiamo tutto il messaggio all&apos;interno del byte_pack
                message(1: 8 + len ) = byte_pack(secondo_254 : secondo_254 + (7+len) ) ;      % era cosi byte_pack(pos_254 : pos_254 + (8+len) ) ;
                messaggio_2 = message ;
                status = 2 ;
                message = uint8(zeros(1,100 )) ;
                counter = uint8(0) ;
                len_found = true ;
                mess_len = 0 ;
             else
                mess_len = length(byte_pack(secondo_254:byte_available ) ) ;    % lunghezza del messaggio da leggere dal byte_pack ( non uguale alla lunghezza del messaggio complessivo)
                message(1 : mess_len) = byte_pack(secondo_254:byte_available ) ;
                len_found = true ;
                counter = 8 + len - mess_len ;
                Interr_parz = true ;
             end
             else
               messaggio_2 = uint8(zeros(1,100 )) ;              
               Interr_parz = false;
               message = uint8(zeros(1,100 )) ;
               counter = uint8(0) ;
               len_found = false ;
               mess_len = 0 ;    
              end
             
        
        
end
end






function [position,counter] = find_254(pack) 
    position = zeros(1,3) ;
    
    M = length(pack)  ;   
    counter = 0 ;
    for i = 1 : M
        if pack(i) == 254 
            counter = counter + 1;  
            position(counter) = i; 
        end
    end
    l = pack(position(1)+1);
    if counter &gt; 1
    if ((pack(l+8+position(1)) ~= 254) &amp;&amp; (position(1) ~= 0))
        counter = 1;
        position(2) = 0;
    end
    end
end</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="byte_pack">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="status">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="messaggio">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="messaggio_2">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="byte_available">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">603</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">603</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="613">
        <P Name="name">MISURE DA SENSORI 
FILTRATE/TX &amp; RX Seriale
Arduino Raspberry/Subsystem1/MATLAB Function1</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">613</P>
        <P Name="ssIdHighWaterMark">8</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">20</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">LETTURA_Rasp_mex</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">613</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [status,check,messaggio]  = LETTURA_Rasp_mex(byte_pack,mess_prec)


status = false;   
check = false;
messaggio = uint8(zeros(1,27)) ;
M = uint8(length(byte_pack)) ;



if ( (byte_pack(1) == 255) &amp;&amp;  (byte_pack(2) == 254) &amp;&amp; (byte_pack(M) == 60))
    messaggio = byte_pack;
    status = true;
    check = false;
else
    messaggio = mess_prec;
    check = true;
    status = true;
end
</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="byte_pack">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="status">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="check">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="messaggio">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="mess_prec">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="primitive">SF_UINT8_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">uint8</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">613</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">613</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="623">
        <P Name="name">AUTOPILOTA/Subsystem1/Chart</P>
        <P Name="windowPosition">[-8 -8 1936 1056]</P>
        <P Name="viewLimits">[-260.984 2727.35 204.31 1657.643]</P>
        <P Name="zoomFactor">2.222</P>
        <P Name="screen">[1 1 3200 1200 1.25]</P>
        <P Name="viewObj">623</P>
        <P Name="ssIdHighWaterMark">42</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="chartFileNumber">21</P>
        <P Name="allowGlobalAccessToExportedFunctions">0</P>
        <P Name="saturateOnIntegerOverflow">1</P>
        <P Name="userSpecifiedStateTransitionExecutionOrder">1</P>
        <P Name="disableImplicitCasting">1</P>
        <P Name="actionLanguage">2</P>
        <Children>
          <state SSID="5">
            <P Name="labelString">AutoTakeoff
Wp_selector = 0;
Vec_selector = 0;
Ato_selector = 1;
Al_selector = 0;
Go_home_selector = 0;</P>
            <P Name="position">[161.8 466.6 150.8 116]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">623</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="3">
            <P Name="labelString">Waypoint
Wp_selector = 1;
Vec_selector = 0;
Ato_selector = 0;
Al_selector = 0;
Go_home_selector = 0;</P>
            <P Name="position">[1868.4 466.6 150.8 116]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">623</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="1">
            <P Name="labelString">In
Wp_selector = 0;
Vec_selector = 0;
Ato_selector = 0;
Al_selector = 0;
Go_home_selector = 0;
</P>
            <P Name="position">[981.4 487 163.4 103]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">623</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="6">
            <P Name="labelString">AutoLanding
Wp_selector = 0;
Vec_selector = 0;
Ato_selector = 0;
Al_selector = 1;
Go_home_selector = 0;</P>
            <P Name="position">[356.2 821.8 150.8 116]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">623</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="4">
            <P Name="labelString">Vettoriale
Wp_selector = 0;
Vec_selector = 1;
Ato_selector = 0;
Al_selector = 0;
Go_home_selector = 0;</P>
            <P Name="position">[1669.8 821.8 150.8 116]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">623</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="7">
            <P Name="labelString">GoHome
Wp_selector = 0;
Vec_selector = 0;
Ato_selector = 0;
Al_selector = 0;
Go_home_selector = 1;</P>
            <P Name="position">[987.7 1047.4 150.8 116]</P>
            <P Name="fontSize">12</P>
            <P Name="subviewer">623</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <data SSID="13" name="Al_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="14" name="Ato_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="15" name="Go_home_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="16" name="Vec_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="17" name="Wp_selector">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="22" name="modo">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="38" name="Ap_sel">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="41">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 1]</P>
            <P Name="labelPosition">[1012.208 54.5 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">5</P>
              <P Name="intersection">[1 0 -1 0.3006 207.1252 466.6 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0.6994 1973.8748 466.6 0 0]</P>
            </dst>
            <P Name="midPoint">[1090.5 20.9081]</P>
            <P Name="dataLimits">[207.125 1976.275 21.482 466.6]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="27">
            <P Name="labelString">[Ap_sel == 0]</P>
            <P Name="labelPosition">[1484.383 245.704 72.656 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0.0995 1883.4 466.6 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">1</P>
              <P Name="intersection">[1 0 -1 0.8533 1120.8239 487 0 0]</P>
            </dst>
            <P Name="midPoint">[1502.1119 282.1308]</P>
            <P Name="dataLimits">[1118.424 1883.4 282.153 487]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="26">
            <P Name="labelString">[Ap_sel == 0]</P>
            <P Name="labelPosition">[469.642 266.768 72.656 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">5</P>
              <P Name="intersection">[1 0 -1 0.9005 297.6 466.6 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">1</P>
              <P Name="intersection">[1 0 -1 0.1606 1007.642 487 0 0]</P>
            </dst>
            <P Name="midPoint">[652.621 295.2624]</P>
            <P Name="dataLimits">[297.6 1010.042 295.265 487]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="2">
            <P Name="labelString">{Wp_selector = 0;
Vec_selector = 0;
Ato_selector = 0;
Al_selector = 0;}</P>
            <P Name="labelPosition">[1032.596 386 96.297 58]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 1018.9965 358 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">1</P>
              <P Name="intersection">[1 0 -1 0.2301 1018.9965 487 0 0]</P>
            </dst>
            <P Name="midPoint">[1018.9965 403.375]</P>
            <P Name="dataLimits">[1016.596 1021.396 358 487]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="39">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 4]</P>
            <P Name="labelPosition">[1075.957 1824.114 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">3</P>
              <P Name="intersection">[2 1 0 0.3349 2019.2 505.4521 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">6</P>
              <P Name="intersection">[4 -1 -0 0.6175 356.2 866.1691 0 0]</P>
            </dst>
            <P Name="midPoint">[1007.0305 1863.1084]</P>
            <P Name="dataLimits">[277.606 2101.431 505.452 1878.577]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">4</P>
          </transition>
          <transition SSID="8">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 1]</P>
            <P Name="labelPosition">[1475.641 474.62 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">1</P>
              <P Name="intersection">[2 1 0 0.365 1144.8 524.6 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[4 -1 -0 0.5 1868.4 524.6 0 0]</P>
            </dst>
            <P Name="midPoint">[1502.6 524.6]</P>
            <P Name="dataLimits">[1144.8 1868.4 522.2 527]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="12">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 3]</P>
            <P Name="labelPosition">[408.328 496.136 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">1</P>
              <P Name="intersection">[4 -1 0 0.5085 981.4 537.6201 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">5</P>
              <P Name="intersection">[2 1 -0 0.6122 312.6 537.6201 0 0]</P>
            </dst>
            <P Name="midPoint">[651 537.6201]</P>
            <P Name="dataLimits">[312.6 981.4 535.22 540.02]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">5</P>
          </transition>
          <transition SSID="32">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 1]</P>
            <P Name="labelPosition">[1054.312 1434.54 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">6</P>
              <P Name="intersection">[3 0 1 0.8586 377.5259 937.8 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[2 1 0 0.7972 2019.2 559.077 0 0]</P>
            </dst>
            <P Name="midPoint">[1671.9002 1302.6737]</P>
            <P Name="dataLimits">[377.526 2112.055 556.677 1489.968]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">3</P>
          </transition>
          <transition SSID="23">
            <P Name="labelString">[Ap_sel == 0]</P>
            <P Name="labelPosition">[505.042 628.168 72.656 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">6</P>
              <P Name="intersection">[1 0 -1 0.8658 486.7675 821.8 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">1</P>
              <P Name="intersection">[4 -1 0 0.1964 981.4 569.7675 0 0]</P>
            </dst>
            <P Name="midPoint">[661.5806 627.2806]</P>
            <P Name="dataLimits">[486.767 981.4 567.368 821.8]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="28">
            <P Name="labelString">[Ap_sel == 0]</P>
            <P Name="labelPosition">[1432.606 581.195 72.656 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">4</P>
              <P Name="intersection">[1 0 -1 0.1295 1689.328 821.8 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">1</P>
              <P Name="intersection">[2 1 0 0.8104 1144.8 570.472 0 0]</P>
            </dst>
            <P Name="midPoint">[1495.1235 622.0765]</P>
            <P Name="dataLimits">[1144.8 1689.328 568.072 821.8]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="42">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 2]</P>
            <P Name="labelPosition">[20.541 1296.166 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">5</P>
              <P Name="intersection">[3 0 1 0.9005 176.8 582.6 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">4</P>
              <P Name="intersection">[3 0 1 0.6525 1722.2081 937.8 0 0]</P>
            </dst>
            <P Name="midPoint">[497.2081 1632.833]</P>
            <P Name="dataLimits">[175.072 1724.608 582.6 1684.927]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">3</P>
          </transition>
          <transition SSID="40">
            <P Name="labelString">[Ap_sel == 1&amp;&amp; modo == 5]</P>
            <P Name="labelPosition">[1729.274 1088.208 149.313 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">3</P>
              <P Name="intersection">[3 0 1 0.2183 1986.2736 582.6 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">7</P>
              <P Name="intersection">[3 0 1 0.154 1115.2736 1163.4 0 0]</P>
            </dst>
            <P Name="midPoint">[1793.2736 1120.2077]</P>
            <P Name="dataLimits">[1112.874 1987.759 582.6 1284.564]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="37">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 2]</P>
            <P Name="labelPosition">[1708.036 655.451 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">3</P>
              <P Name="intersection">[3 0 1 0.651 1921.036 582.6 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">4</P>
              <P Name="intersection">[1 -0 -1 0.7266 1779.3693 821.8 0 0]</P>
            </dst>
            <P Name="midPoint">[1850.2027 698.2]</P>
            <P Name="dataLimits">[1776.969 1921.036 582.6 821.8]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">3</P>
          </transition>
          <transition SSID="34">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 1]</P>
            <P Name="labelPosition">[1819.76 737.106 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">4</P>
              <P Name="intersection">[2 1 0 0.8707 1820.6 922.8 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[3 0 1 0.109 2002.7597 582.6 0 0]</P>
            </dst>
            <P Name="midPoint">[1959.038 804.0582]</P>
            <P Name="dataLimits">[1820.6 2005.16 582.6 922.8]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="11">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 4]</P>
            <P Name="labelPosition">[599.042 773.983 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">1</P>
              <P Name="intersection">[3 0 1 0.8934 998.8201 590 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">6</P>
              <P Name="intersection">[2 1 0 0.1502 507 839.2201 0 0]</P>
            </dst>
            <P Name="midPoint">[824.9395 782.6395]</P>
            <P Name="dataLimits">[507 998.82 590 841.62]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">4</P>
          </transition>
          <transition SSID="10">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 5]</P>
            <P Name="labelPosition">[861.292 969.285 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">1</P>
              <P Name="intersection">[3 0 1 0.6654 1036.0739 590 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">7</P>
              <P Name="intersection">[1 -0 -1 0.3208 1036.0739 1047.4 0 0]</P>
            </dst>
            <P Name="midPoint">[1036.0739 814.7]</P>
            <P Name="dataLimits">[1033.674 1038.474 590 1047.4]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">3</P>
          </transition>
          <transition SSID="29">
            <P Name="labelString">[Ap_sel == 0]</P>
            <P Name="labelPosition">[1119.574 967.95 72.656 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">7</P>
              <P Name="intersection">[1 0 -1 0.6358 1083.5739 1047.4 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">1</P>
              <P Name="intersection">[3 -0 1 0.3747 1083.5739 590 0 0]</P>
            </dst>
            <P Name="midPoint">[1083.5739 822.7]</P>
            <P Name="dataLimits">[1081.174 1085.974 590 1047.4]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="9">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 2]</P>
            <P Name="labelPosition">[1360.401 762.458 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">1</P>
              <P Name="intersection">[3 0 1 0.0968 1128.9799 590 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">4</P>
              <P Name="intersection">[4 -1 0 0.8636 1669.8 837.6201 0 0]</P>
            </dst>
            <P Name="midPoint">[1321.9464 787.2536]</P>
            <P Name="dataLimits">[1128.98 1669.8 590 840.02]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="36">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 4]</P>
            <P Name="labelPosition">[1083.343 1669.81 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">4</P>
              <P Name="intersection">[2 1 0 0.8707 1820.6 922.8 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">6</P>
              <P Name="intersection">[4 -1 0 0.4281 356.2 888.1435 0 0]</P>
            </dst>
            <P Name="midPoint">[1359.0097 1708.1435]</P>
            <P Name="dataLimits">[290.551 1893.217 885.744 1734.516]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">4</P>
          </transition>
          <transition SSID="31">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 2]</P>
            <P Name="labelPosition">[1024.021 1281.934 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">6</P>
              <P Name="intersection">[3 0 1 0.6066 415.5241 937.8 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">4</P>
              <P Name="intersection">[3 0 1 0.3934 1761.2759 937.8 0 0]</P>
            </dst>
            <P Name="midPoint">[1146.9002 1330.1737]</P>
            <P Name="dataLimits">[415.524 1763.676 937.8 1330.475]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="33">
            <P Name="labelString">[Ap_sel == 1 &amp;&amp; modo == 5]</P>
            <P Name="labelPosition">[647.026 1062.284 152.641 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">6</P>
              <P Name="intersection">[3 0 1 0.5496 424.1162 937.8 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">7</P>
              <P Name="intersection">[4 -1 0 0.2855 987.7 1130.2838 0 0]</P>
            </dst>
            <P Name="midPoint">[628.4103 1107.5397]</P>
            <P Name="dataLimits">[424.116 987.7 937.8 1135.265]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">4</P>
          </transition>
          <transition SSID="35">
            <P Name="labelString">[Ap_sel == 1&amp;&amp; modo == 5]</P>
            <P Name="labelPosition">[1343.51 1075.106 149.313 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">4</P>
              <P Name="intersection">[3 0 1 0.4996 1745.2559 937.8 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">7</P>
              <P Name="intersection">[2 1 0 0.6505 1138.5 1122.8559 0 0]</P>
            </dst>
            <P Name="midPoint">[1524.2156 1108.6656]</P>
            <P Name="dataLimits">[1138.5 1745.256 937.8 1131.605]</P>
            <P Name="subviewer">623</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">3</P>
          </transition>
        </Children>
      </chart>
      <chart id="660">
        <P Name="name">AUTOPILOTA/AUTOPILOTI1/CONTROLLORE DI QUOTA/SELEZIONE MODALITA&apos; 
HOLD//SELECT</P>
        <P Name="windowPosition">[846 1 960 1050]</P>
        <P Name="viewLimits">[-18.759 546.041 -48.826 641.574]</P>
        <P Name="zoomFactor">1.067</P>
        <P Name="screen">[1 1 1366 768 1.611111111111111]</P>
        <P Name="viewObj">660</P>
        <P Name="ssIdHighWaterMark">13</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="chartFileNumber">23</P>
        <P Name="disableImplicitCasting">1</P>
        <P Name="supportVariableSizing">0</P>
        <Children>
          <state SSID="1">
            <P Name="labelString">Select

during:
mod=1;</P>
            <P Name="position">[34.375 108.375 97.625 89.625]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">GROUPED</P>
            <P Name="subviewer">660</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="2">
            <P Name="labelString">Hold

during:
mod=0;</P>
            <P Name="position">[239.625 109.125 103.625 88.875]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">GROUPED</P>
            <P Name="subviewer">660</P>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <data SSID="8" name="mod">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="9" name="deltah">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="3">
            <P Name="labelPosition">[51.85 80.766 8.246 14.971]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 70.25 78.375 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">1</P>
              <P Name="intersection">[1 0 -1 0.3675 70.25 108.375 0 0]</P>
            </dst>
            <P Name="midPoint">[70.25 89.7665]</P>
            <P Name="dataLimits">[67.85 72.65 78.375 108.375]</P>
            <P Name="subviewer">660</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="4">
            <P Name="labelString">[deltah&lt;10]</P>
            <P Name="labelPosition">[149.027 102.751 61.672 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">1</P>
              <P Name="intersection">[2 1 0 0.1925 132 125.6291 0 -29.4375]</P>
            </src>
            <dst>
              <P Name="SSID">2</P>
              <P Name="intersection">[4 -1 -0 0.8143 239.625 125.6291 0 28.6875]</P>
            </dst>
            <P Name="midPoint">[183.8915 125.6291]</P>
            <P Name="dataLimits">[132 239.625 123.229 128.029]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">660</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="10">
            <P Name="labelString">[deltah&gt;10]</P>
            <P Name="labelPosition">[162.488 154.877 61.672 16]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">2</P>
              <P Name="intersection">[4 -1 -0 0.2489 239.625 175.879 0 -24.5625]</P>
            </src>
            <dst>
              <P Name="SSID">1</P>
              <P Name="intersection">[2 1 0 0.7532 132 175.879 0 25.3125]</P>
            </dst>
            <P Name="midPoint">[187.7335 175.879]</P>
            <P Name="dataLimits">[132 239.625 173.479 178.279]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">660</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
        </Children>
      </chart>
      <chart id="669">
        <P Name="name">AUTOPILOTA/GESTIONE AUTOPILOTI1/ STATI</P>
        <P Name="windowPosition">[-8 -8 1456 876]</P>
        <P Name="viewLimits">[-274.405 1127.595 -109.037 582.963]</P>
        <P Name="zoomFactor">1.333</P>
        <P Name="screen">[1 1 1366 768 1.611111111111111]</P>
        <P Name="viewObj">669</P>
        <subviewS>
          <P Name="zoomFactor">1.25</P>
        </subviewS>
        <P Name="ssIdHighWaterMark">330</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="chartFileNumber">26</P>
        <P Name="disableImplicitCasting">1</P>
        <P Name="supportVariableSizing">0</P>
        <Children>
          <state SSID="318">
            <P Name="labelString">Go_Home
during:
modo = 5;
switch_manetta = 1;
switch_equilibratore =1;
switch_alettoni=1;
switch_timone=1;</P>
            <P Name="position">[733.4406 20.9464 170 134.6667]</P>
            <P Name="fontSize">12</P>
            <P Name="visible">0</P>
            <P Name="subviewer">669</P>
            <subviewS>
              <P Name="panLimits">[-24 1282.667 -24 702.667]</P>
              <P Name="x1">-17.778</P>
              <P Name="y1">-17.778</P>
              <P Name="pos">[0 0 170 134.667]</P>
            </subviewS>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="316">
            <P Name="labelString">MANUALE

during:
switch_manetta=0;
switch_equilibratore=0;
switch_alettoni=0;
switch_timone=0;</P>
            <P Name="position">[20.7649 163.6517 133.2848 128.4731]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="visible">0</P>
            <P Name="subviewer">669</P>
            <subviewS>
              <P Name="panLimits">[-24 1289 -24 668]</P>
              <P Name="x1">20.586</P>
              <P Name="y1">20.586</P>
              <P Name="zoomFactor">1.067</P>
              <P Name="pos">[33 33 209.201 131.037]</P>
            </subviewS>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="323">
            <P Name="labelString">Safe

during:
switch_manetta=1;
switch_equilibratore=1;
switch_alettoni=1;
switch_timone=1;
phi_safe=0.1745;
theta_safe=0.05;
throttle_safe=0.1;</P>
            <P Name="position">[452.8761 163.6517 134.8996 41.7597]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="visible">0</P>
            <P Name="subviewer">669</P>
            <subviewS>
              <P Name="panLimits">[-24 678.667 -24 519.333]</P>
              <P Name="x1">20</P>
              <P Name="y1">20</P>
              <P Name="zoomFactor">0.889</P>
              <P Name="pos">[35 35 205.255 157.791]</P>
            </subviewS>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="317">
            <P Name="labelString">Intervento_Pilota

during:
switch_manetta=0;
switch_equilibratore=0;
switch_alettoni=0;
switch_timone=0;</P>
            <P Name="position">[247.3428 220.4278 130.207 42.987]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="visible">0</P>
            <P Name="subviewer">669</P>
            <subviewS>
              <P Name="panLimits">[-24 678.667 -24 519.333]</P>
              <P Name="x1">20</P>
              <P Name="y1">20</P>
              <P Name="zoomFactor">0.889</P>
              <P Name="pos">[35 35 204.339 115.654]</P>
            </subviewS>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <state SSID="292">
            <P Name="labelString">AUTOMATICA

</P>
            <P Name="position">[468.4065 317.4988 203.1347 115.4351]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="visible">0</P>
            <P Name="subviewer">669</P>
            <subviewS>
              <P Name="panLimits">[472.234 1785.234 187.372 879.372]</P>
              <P Name="x1">461.667</P>
              <P Name="y1">190.667</P>
              <P Name="zoomFactor">1.067</P>
              <P Name="pos">[483 212 688.735 477.835]</P>
              <P Name="fontSize">9</P>
            </subviewS>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <Children>
              <state SSID="306">
                <P Name="labelString">WAYPOINT
during: 
modo = 1;
switch_manetta = 1;
switch_equilibratore =1;
switch_alettoni=1;
switch_timone=1;</P>
                <P Name="position">[512.5863 295.6238 123.9381 112.9709]</P>
                <P Name="fontSize">9.823</P>
                <P Name="arrowSize">6.549</P>
                <P Name="visible">0</P>
                <P Name="subviewer">292</P>
                <P Name="type">OR_STATE</P>
                <P Name="decomposition">CLUSTER_STATE</P>
              </state>
              <state SSID="307">
                <P Name="labelString">TEST
during:
switch_manetta = 0;
switch_equilibratore = 0;
switch_alettoni = 0;
switch_timone = 0;</P>
                <P Name="position">[977.6214 298.6829 141.678 100.9118]</P>
                <P Name="fontSize">12</P>
                <P Name="visible">0</P>
                <P Name="subviewer">292</P>
                <P Name="type">OR_STATE</P>
                <P Name="decomposition">CLUSTER_STATE</P>
              </state>
              <state SSID="308">
                <P Name="labelString">VETTORIALE
during: 
modo = 2;
switch_manetta = 1;
switch_equilibratore =1;
switch_alettoni=1;
switch_timone=1;
</P>
                <P Name="position">[752.9794 414.7475 109.5905 105.8597]</P>
                <P Name="fontSize">9.823</P>
                <P Name="arrowSize">6.549</P>
                <P Name="visible">0</P>
                <P Name="subviewer">292</P>
                <P Name="type">OR_STATE</P>
                <P Name="decomposition">CLUSTER_STATE</P>
              </state>
              <state SSID="309">
                <P Name="labelString">DECOLLO_AUTOMATICO
during:
modo = 3;
switch_manetta = 1;
switch_equilibratore = 1;
switch_alettoni = 1;
switch_timone = 1;
</P>
                <P Name="position">[941.786 509.5628 213.3488 163.3462]</P>
                <P Name="fontSize">12</P>
                <P Name="visible">0</P>
                <P Name="subviewer">292</P>
                <P Name="type">OR_STATE</P>
                <P Name="decomposition">CLUSTER_STATE</P>
              </state>
              <state SSID="310">
                <P Name="labelString">ATTERRAGGIO_AUTOMATICO
during: 
modo = 4;
switch_manetta = 1;
switch_equilibratore =1;
switch_alettoni=1;
switch_timone=1;</P>
                <P Name="position">[507.0731 523.7491 186.9645 134.9737]</P>
                <P Name="fontSize">12</P>
                <P Name="visible">0</P>
                <P Name="subviewer">292</P>
                <P Name="type">OR_STATE</P>
                <P Name="decomposition">CLUSTER_STATE</P>
              </state>
              <transition SSID="293">
                <P Name="labelString">[WP_nav == 1 &amp;&amp; h&gt;30]</P>
                <P Name="labelPosition">[1007.197 225.021 130.984 16]</P>
                <P Name="fontSize">12</P>
                <P Name="arrowSize">6.549</P>
                <src>
                  <P Name="SSID">309</P>
                  <P Name="intersection">[1 0 -1 0.6567 1081.8881 509.5628 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">306</P>
                  <P Name="intersection">[1 0 -1 0.769 607.8962 295.6238 0 0]</P>
                </dst>
                <P Name="midPoint">[1151.3023 402.2307]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[605.932 1159.826 225.774 509.563]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">2</P>
              </transition>
              <transition SSID="294">
                <P Name="labelString">[test==0]</P>
                <P Name="labelPosition">[909.862 343.11 48.5 17]</P>
                <P Name="fontSize">12</P>
                <P Name="arrowSize">6.549</P>
                <src>
                  <P Name="SSID">307</P>
                  <P Name="intersection">[4 -1 0 0.6031 977.6214 338.7314 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[1 0 -1 0.7183 831.6999 414.7475 0 0]</P>
                </dst>
                <P Name="midPoint">[884.5363 352.6151]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[829.735 977.621 338.731 414.748]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="295">
                <P Name="labelString">[WP_nav == 0 &amp;&amp;  (IAS == 1 || ALT == 1 || HDG == 1||ATO==1)]</P>
                <P Name="labelPosition">[657.506 314.709 253 14]</P>
                <P Name="fontSize">9.823</P>
                <P Name="arrowSize">6.549</P>
                <src>
                  <P Name="SSID">306</P>
                  <P Name="intersection">[2 1 0 0.4418 636.5244 345.538 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[1 0 -1 0.1369 767.9794 414.7475 0 0]</P>
                </dst>
                <P Name="midPoint">[720.4551 358.6651]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[636.524 769.944 345.538 414.748]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="296">
                <P Name="labelString"/>
                <P Name="labelPosition">[824.881 352.972 2 14]</P>
                <P Name="fontSize">9.823</P>
                <P Name="arrowSize">6.549</P>
                <src>
                  <P Name="intersection">[0 0 0 0 843.9017 350.9332 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[1 0 -1 0.4825 805.8609 414.7475 0 0]</P>
                </dst>
                <P Name="midPoint">[824.8813 370.9721]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[803.896 843.902 350.933 414.748]</P>
                <P Name="subviewer">292</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="297">
                <P Name="labelString">[test==1]</P>
                <P Name="labelPosition">[918.967 398.966 48.5 17]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[2 1 0 0.1633 862.5699 432.0389 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">307</P>
                  <P Name="intersection">[4 -1 -0 0.276 977.6214 371.7479 0 0]</P>
                </dst>
                <P Name="midPoint">[916.0956 401.8933]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[862.57 977.621 369.348 432.039]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="299">
                <P Name="labelString">[AL==0 &amp;&amp; h&gt;20 &amp;&amp; WP_nav==1 ]</P>
                <P Name="labelPosition">[576.884 460.946 185.656 16]</P>
                <P Name="fontSize">12</P>
                <P Name="arrowSize">6.549</P>
                <src>
                  <P Name="SSID">310</P>
                  <P Name="intersection">[1 -0 -1 0.3771 577.5701 523.7491 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">306</P>
                  <P Name="intersection">[3 0 1 0.4757 577.5701 408.5947 0 0]</P>
                </dst>
                <P Name="midPoint">[577.5701 469.4464]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[575.605 579.535 408.595 523.749]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="298">
                <P Name="labelString">[AL==1]</P>
                <P Name="labelPosition">[493.524 454.67 44 17]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">306</P>
                  <P Name="intersection">[3 -0 1 0.6962 550.2417 408.5947 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">310</P>
                  <P Name="intersection">[1 0 -1 0.1632 537.5838 523.7491 0 0]</P>
                </dst>
                <P Name="midPoint">[543.9128 462.1719]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[535.184 550.242 408.595 523.749]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">2</P>
              </transition>
              <transition SSID="300">
                <P Name="labelString">[WP_nav == 1]</P>
                <P Name="labelPosition">[620.401 422.361 61.5 14]</P>
                <P Name="fontSize">9.823</P>
                <P Name="arrowSize">6.549</P>
                <src>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[4 -1 0 0.7837 752.9794 437.648 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">306</P>
                  <P Name="intersection">[3 0 1 0.1799 614.2257 408.5947 0 0]</P>
                </dst>
                <P Name="midPoint">[666.0317 443.9667]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[612.261 752.979 408.595 443.963]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">4</P>
              </transition>
              <transition SSID="301">
                <P Name="labelString">[AL==0 &amp;&amp; h&gt;20]</P>
                <P Name="labelPosition">[655.928 498.139 93.75 17]</P>
                <P Name="fontSize">12</P>
                <P Name="arrowSize">6.549</P>
                <src>
                  <P Name="SSID">310</P>
                  <P Name="intersection">[1 0 -1 0.6889 635.8756 523.7491 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[4 -1 0 0.5001 752.9794 467.6662 0 0]</P>
                </dst>
                <P Name="midPoint">[675.6572 480.2118]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[635.876 752.979 465.702 523.749]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">2</P>
              </transition>
              <transition SSID="302">
                <P Name="labelString">[ATO == 0 &amp;&amp; Tas &gt;= 1 &amp;&amp; (IAS == 1 || ALT == 1 || HDG == 1) ]</P>
                <P Name="labelPosition">[867.649 452.05 250 14]</P>
                <P Name="arrowSize">6.549</P>
                <src>
                  <P Name="SSID">309</P>
                  <P Name="intersection">[1 0 -1 0.3638 1019.4065 509.5628 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[2 1 0 0.6991 862.5699 488.7577 0 0]</P>
                </dst>
                <P Name="midPoint">[911.3283 478.0833]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[862.57 1019.407 474.55 509.563]</P>
                <P Name="subviewer">292</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">1</P>
              </transition>
              <transition SSID="303">
                <P Name="labelString">[AL==1]</P>
                <P Name="labelPosition">[765.702 546.633 44 17]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[3 0 1 0.7603 779.247 520.6072 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">310</P>
                  <P Name="intersection">[2 1 0 0.3783 694.0376 574.808 0 0]</P>
                </dst>
                <P Name="midPoint">[752.4341 559.4994]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[694.038 779.247 520.607 577.208]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">3</P>
              </transition>
              <transition SSID="304">
                <P Name="labelString">[ATO == 1 &amp;&amp; v_&lt; 1]</P>
                <P Name="labelPosition">[777.975 580.344 112.969 16]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">308</P>
                  <P Name="intersection">[3 0 1 0.2579 834.3043 520.6072 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">309</P>
                  <P Name="intersection">[4 -1 0 0.5471 941.786 583.5365 0 0]</P>
                </dst>
                <P Name="midPoint">[827.61 540.5182]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[826.458 941.786 520.607 585.937]</P>
                <P Name="subviewer">292</P>
                <slide>
                  <P Name="mode">MIRROR_SLIDE</P>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">2</P>
              </transition>
              <transition SSID="305">
                <P Name="labelString">[ATO == 1 &amp;&amp; AL == 0 &amp;&amp; h&lt;1 &amp;&amp; v_&lt;1]</P>
                <P Name="labelPosition">[706.565 627.454 215.109 16]</P>
                <P Name="fontSize">12</P>
                <src>
                  <P Name="SSID">310</P>
                  <P Name="intersection">[2 1 0 0.7303 694.0376 622.3239 0 0]</P>
                </src>
                <dst>
                  <P Name="SSID">309</P>
                  <P Name="intersection">[4 -1 -0 0.3097 941.786 622.3239 0 0]</P>
                </dst>
                <P Name="midPoint">[813.9118 622.3239]</P>
                <P Name="visible">0</P>
                <P Name="dataLimits">[694.038 941.786 619.924 624.724]</P>
                <P Name="subviewer">292</P>
                <P Name="drawStyle">SMART</P>
                <slide>
                  <P Name="sticky">BOTH_STICK</P>
                </slide>
                <P Name="executionOrder">3</P>
              </transition>
            </Children>
          </state>
          <state SSID="290">
            <P Name="labelString">Stand_By

during:
switch_manetta=0;
switch_equilibratore=0;
switch_alettoni=0;
switch_timone=0;</P>
            <P Name="position">[145.7256 363.0362 128.3338 41.5721]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="visible">0</P>
            <P Name="subviewer">669</P>
            <subviewS>
              <P Name="panLimits">[-24 1318 -24 791]</P>
              <P Name="x1">20.483</P>
              <P Name="y1">20.483</P>
              <P Name="zoomFactor">1.667</P>
              <P Name="pos">[36 36 206.037 118.833]</P>
            </subviewS>
            <P Name="type">OR_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
          </state>
          <data SSID="25" name="MANUALE">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="37" name="Ingaggio_A_P">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="255" name="WP_nav">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="125" name="ALT">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="127" name="IAS">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="128" name="HDG">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="129" name="switch_manetta">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="130" name="switch_equilibratore">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="131" name="switch_alettoni">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="132" name="switch_timone">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="60" name="Alarm_Safe">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="61" name="phi_safe">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="62" name="theta_safe">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="63" name="throttle_safe">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="74" name="Alarm_Intervento">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="263" name="modo">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <P Name="initialValue">1</P>
              <type>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">double</P>
          </data>
          <data SSID="269" name="ATO">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="272" name="Tas">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="277" name="AL">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="280" name="v_">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="286" name="test">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="289" name="h">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="330" name="Go_Home">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="315">
            <P Name="labelString">[Go_Home == 1 &amp;&amp; Alarm_Safe == 0]</P>
            <P Name="labelPosition">[342.216 35.778 202.5 17]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">316</P>
              <P Name="intersection">[1 0 -1 0.7193 116.6429 163.6517 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">318</P>
              <P Name="intersection">[4 -1 0 0.5099 733.4406 86.9464 0 0]</P>
            </dst>
            <P Name="midPoint">[344.3404 48.5977]</P>
            <P Name="dataLimits">[116.643 733.441 46.719 163.652]</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="321">
            <P Name="labelString">[Alarm_Intervento==1]</P>
            <P Name="labelPosition">[427.388 88.772 120.75 17]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">318</P>
              <P Name="intersection">[4 -1 0 0.3267 733.4406 111.6131 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">317</P>
              <P Name="intersection">[1 0 -1 0.7736 348.0716 220.4278 0 0]</P>
            </dst>
            <P Name="midPoint">[490.9638 112.2282]</P>
            <P Name="dataLimits">[345.672 733.441 103.145 220.428]</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">3</P>
          </transition>
          <transition SSID="312">
            <P Name="labelString">[Alarm_Safe == 1]</P>
            <P Name="labelPosition">[585.743 136.195 98.5 17]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">318</P>
              <P Name="intersection">[4 -1 0 0.1258 733.4406 138.6709 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">323</P>
              <P Name="intersection">[1 0 -1 0.8744 570.8334 163.6517 0 0]</P>
            </dst>
            <P Name="midPoint">[631.7006 126.7249]</P>
            <P Name="dataLimits">[568.433 733.441 126.653 163.652]</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="314">
            <P Name="labelPosition">[63.51 136.043 8.433 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 81.9108 136.8549 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">316</P>
              <P Name="intersection">[1 0 -1 0.4588 81.9108 163.6517 0 0]</P>
            </dst>
            <P Name="midPoint">[81.9108 146.5752]</P>
            <P Name="dataLimits">[79.511 84.311 136.855 163.652]</P>
            <P Name="subviewer">669</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="320">
            <P Name="labelString">[Go_Home == 1]</P>
            <P Name="labelPosition">[646.741 294.151 90.75 17]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">292</P>
              <P Name="intersection">[2 1 0 0.3462 671.5412 357.4593 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">318</P>
              <P Name="intersection">[3 0 1 0.7078 783.1073 155.6131 0 0]</P>
            </dst>
            <P Name="midPoint">[755.2817 288.4935]</P>
            <P Name="dataLimits">[671.541 785.507 155.613 357.459]</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">3</P>
          </transition>
          <transition SSID="291">
            <P Name="labelString">[Go_Home == 0 &amp;&amp; (WP_nav == 1 || IAS == 1 || ALT == 1 || HDG == 1|| AL == 1)]</P>
            <P Name="labelPosition">[816.707 263.655 429.75 17]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">318</P>
              <P Name="intersection">[3 0 1 0.4373 829.1073 155.6131 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">292</P>
              <P Name="intersection">[2 1 0 0.5464 671.5412 380.577 0 0]</P>
            </dst>
            <P Name="midPoint">[788.0924 301.8633]</P>
            <P Name="dataLimits">[671.541 829.107 155.613 382.977]</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="329">
            <P Name="labelString">[MANUALE==1]</P>
            <P Name="labelPosition">[280.745 163.997 89.956 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">323</P>
              <P Name="intersection">[4 -1 -0 0.5072 452.8761 184.2309 0 13.2367]</P>
            </src>
            <dst>
              <P Name="SSID">316</P>
              <P Name="intersection">[2 1 0 0.1602 154.0498 184.2309 0 -13.2367]</P>
            </dst>
            <P Name="midPoint">[307.4629 184.2309]</P>
            <P Name="dataLimits">[154.05 452.876 181.831 186.631]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="313">
            <P Name="labelString">[Alarm_Intervento==1]</P>
            <P Name="labelPosition">[418.549 217.557 120.879 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">323</P>
              <P Name="intersection">[3 0 1 0.7801 482.5437 205.4114 0 -29.6677]</P>
            </src>
            <dst>
              <P Name="SSID">317</P>
              <P Name="intersection">[2 1 0 0.5384 377.5498 243.571 0 26.8706]</P>
            </dst>
            <P Name="midPoint">[447.3313 239.9133]</P>
            <P Name="dataLimits">[377.55 482.544 205.411 245.971]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="327">
            <P Name="labelString">[Alarm_Safe==1]</P>
            <P Name="labelPosition">[512.49 248.117 93.705 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">292</P>
              <P Name="intersection">[1 0 -1 0.4397 557.7201 317.4988 0 39.1025]</P>
            </src>
            <dst>
              <P Name="SSID">323</P>
              <P Name="intersection">[3 0 1 0.2228 557.7201 205.4114 0 -39.1025]</P>
            </dst>
            <P Name="midPoint">[557.7201 265.4551]</P>
            <P Name="dataLimits">[555.32 560.12 205.411 317.499]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="328">
            <P Name="labelString">[MANUALE==1]</P>
            <P Name="labelPosition">[161.774 208.584 89.956 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">317</P>
              <P Name="intersection">[4 -1 -0 0.7827 247.3428 229.7689 0 15.6529]</P>
            </src>
            <dst>
              <P Name="SSID">316</P>
              <P Name="intersection">[2 1 0 0.5146 154.0498 229.7689 0 -15.6529]</P>
            </dst>
            <P Name="midPoint">[204.6962 229.7689]</P>
            <P Name="dataLimits">[154.05 247.343 227.369 232.169]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="311">
            <P Name="labelString">[Alarm_Intervento==1]</P>
            <P Name="labelPosition">[377.332 283.235 120.879 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">292</P>
              <P Name="intersection">[1 0 -1 0.0905 486.7951 317.4988 0 18.3885]</P>
            </src>
            <dst>
              <P Name="SSID">317</P>
              <P Name="intersection">[3 0 1 0.0718 368.2074 263.4148 0 9.3424]</P>
            </dst>
            <P Name="midPoint">[426.6343 296.3019]</P>
            <P Name="dataLimits">[365.807 486.795 263.415 317.499]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="319">
            <P Name="labelString">[MANUALE==1]</P>
            <P Name="labelPosition">[205.271 300.873 89.956 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">292</P>
              <P Name="intersection">[4 -1 0 0.8048 468.4065 340.0373 0 -22.5386]</P>
            </src>
            <dst>
              <P Name="SSID">316</P>
              <P Name="intersection">[2 1 0 0.8832 154.0498 277.1248 0 -12.0623]</P>
            </dst>
            <P Name="midPoint">[309.6234 307.0606]</P>
            <P Name="dataLimits">[154.05 468.406 274.725 340.037]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">5</P>
          </transition>
          <transition SSID="324">
            <P Name="labelString">[MANUALE==1]</P>
            <P Name="labelPosition">[23.946 356.494 89.956 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">290</P>
              <P Name="intersection">[4 -1 0 0.2053 145.7256 396.0741 0 -41.3621]</P>
            </src>
            <dst>
              <P Name="SSID">316</P>
              <P Name="intersection">[3 0 1 0.7724 51.1028 292.1248 0 102.9469]</P>
            </dst>
            <P Name="midPoint">[78.5555 363.2727]</P>
            <P Name="dataLimits">[48.703 145.726 292.125 396.074]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="326">
            <P Name="labelString">[MANUALE==0]</P>
            <P Name="labelPosition">[61.532 310.782 89.956 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">316</P>
              <P Name="intersection">[3 0 1 0.5561 79.9341 292.1248 0 74.1156]</P>
            </src>
            <dst>
              <P Name="SSID">290</P>
              <P Name="intersection">[4 -1 0 0.4798 145.7256 384.6639 0 -29.9519]</P>
            </dst>
            <P Name="midPoint">[95.9312 354.9601]</P>
            <P Name="dataLimits">[79.934 145.726 292.125 387.064]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="mode">MIRROR_SLIDE</P>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">2</P>
          </transition>
          <transition SSID="325">
            <P Name="labelString">[Ingaggio_A_P==1]</P>
            <P Name="labelPosition">[316.765 356.684 105.886 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">290</P>
              <P Name="intersection">[2 1 0 0.3579 274.0593 377.9149 0 -19.6928]</P>
            </src>
            <dst>
              <P Name="SSID">292</P>
              <P Name="intersection">[4 -1 0 0.4766 468.4065 377.9149 0 31.1603]</P>
            </dst>
            <P Name="midPoint">[367.233 377.9149]</P>
            <P Name="dataLimits">[274.059 468.406 375.515 380.315]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <transition SSID="322">
            <P Name="labelString">[Ingaggio_A_P==0]</P>
            <P Name="labelPosition">[325.184 391.683 105.886 16.842]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="SSID">292</P>
              <P Name="intersection">[4 -1 0 0.3463 468.4065 392.9556 0 -11.5469]</P>
            </src>
            <dst>
              <P Name="SSID">290</P>
              <P Name="intersection">[2 1 0 0.7197 274.0593 392.9556 0 10.7345]</P>
            </dst>
            <P Name="midPoint">[375.233 392.9556]</P>
            <P Name="dataLimits">[274.059 468.406 390.556 395.356]</P>
            <P Name="stampAngle">NaN</P>
            <P Name="subviewer">669</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">4</P>
          </transition>
        </Children>
      </chart>
      <chart id="734">
        <P Name="name">AUTOPILOTA/GESTIONE AUTOPILOTI1/Intervento Manager/MATLAB Function1</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">734</P>
        <P Name="ssIdHighWaterMark">20</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">27</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">Intervento</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">734</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [Int_1, sw, Int_05] = Intervento(Manuale, Ingaggio_AP, absE, absA, absT, interventoE_1, interventoE_05, interventoA_1, interventoA_05, interventoT)
%#codegen

% persistent Ef Af Tf;
% 
% if (isempty(Ef) || Manuale == 1 || Ingaggio_AP == 0)
%     
%     Ef = absE;
%     Af = absA;
%     Tf = absT;   
%     
% end

persistent Tf;

if (isempty(Tf) || Manuale == 1 || Ingaggio_AP == 0)
    
    Tf = absT;  
    
end

if Ingaggio_AP == 1

%     dE = abs((Ef-absE));
%     dA = abs((Af-absA));
    dT = abs((Tf-absT));
    
%     if ((dE &gt; 0.017 &amp;&amp; dE &lt; 0.1) &amp;&amp; ALT == 1) % range compreso tra 0.97 e 5.73 deg di equilibratore

    if (absE &gt; interventoE_1 &amp;&amp; absE &lt; interventoE_05) % interventoE_1 pari a 3.2 deg (il valore di trim dell&apos;equilibratore alla massima velocit  di 3.18 deg)
                                                       % interventoE_05 pari al 30% (7.5 deg) del valore massimo assumibile dall&apos;equilibratore pari a 25 deg.
                                                       % vedere il file Soglie_intervento.mat
        
        Int_1  = 1; % in questo caso scatta Int_temporiz il che significa che per attivarsi...  
        Int_05 = 0; % l&apos;intervento pilota deve essere soddisfatta anche la successiva...
        sw            = 1; % condizione sul tempo di durata del comando sull&apos;equilibratore 
                           
%     elseif (dE &gt; 0.1 &amp;&amp; ALT == 1)

    elseif absE &gt; interventoE_05
        
        Int_1  = 0;
        Int_05 = 1;
        sw            = 0;
    
%     elseif ((dA &gt; 0.017 &amp;&amp; dA &lt; 0.087) &amp;&amp; HDG == 1) % range compreso tra 0.97 e 4.98 deg di alettoni

    elseif (absA &gt; interventoA_1 &amp;&amp; absA &lt; interventoA_05) % interventoA_1 pari a 2 deg 
                                                           % interventoA_05 pari al 30% (6 deg) del valore massimo assumibile dall&apos;alettone pari a 20 deg.

        Int_1  = 1;
        Int_05 = 0;
        sw            = 1;
        
%     elseif (dA &gt; 0.087 &amp;&amp; HDG == 1)

    elseif absA &gt; interventoA_05
        
        Int_1  = 0;
        Int_05 = 1;
        sw            = 0;
   
    elseif dT &gt; interventoT % interventoT uguale al 10% del valore massimo di manetta pari a 1; 0.1 sono circa tre scatti di comando della manetta
        
        Int_1  = 0; % nel caso della manetta se si supera la soglia scatta direttamente l&apos;intervento pilota... 
        Int_05 = 1; % senza il controllo sul tempo
        sw            = 0;
        
    else
        
        Int_1  = 0;
        Int_05 = 0;
        sw            = 1;
                
    end
    
else
        
    Int_1  = 0; % quando il velivolo  in modo manuale gli interruttori sono posti a zero
    Int_05 = 0;
    sw            = 1;

end
    
end</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="15" name="Manuale">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="Int_1">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="14" name="sw">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="Ingaggio_AP">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="absE">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="absA">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="absT">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="13" name="Int_05">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="16" name="interventoE_1">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="17" name="interventoE_05">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="19" name="interventoA_1">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="20" name="interventoA_05">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="18" name="interventoT">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">734</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">734</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="752">
        <P Name="name">AUTOPILOTA/GESTIONE AUTOPILOTI1/MATLAB Function</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">752</P>
        <P Name="ssIdHighWaterMark">6</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">29</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">752</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [Switch_ATO,Switch_AL] = fcn(modo)

persistent ATO AL

if modo == 3
    ATO = 1;
    AL = 0;
elseif modo == 4 
    AL = 1;
    ATO = 0;
else
    ATO = 0;
    AL = 0;
end

Switch_ATO = ATO;
Switch_AL = AL;</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="modo">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="Switch_ATO">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="Switch_AL">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">752</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">752</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="760">
        <P Name="name">AUTOPILOTA/GESTIONE AUTOPILOTI1/Safe Manager/MATLAB Function1</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">760</P>
        <P Name="ssIdHighWaterMark">12</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">30</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">760</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function Alarm_safe = fcn(Veloc, phi, ingaggio_AP, safe_V, safe_phi, Manuale)
%#codegen
persistent alarm;

if (isempty(alarm))
    
    alarm = 0;

end

if (ingaggio_AP == 1 &amp;&amp; (Veloc &gt; safe_V || abs(phi) &gt; safe_phi)) % soglia sulla velocit impostata a 40 m/s e soglia sull&apos;angolo di rollio impostata a 45 deg
    
    alarm = 1;  

elseif (Manuale == 1) % l&apos;allarme si disattiva solo quando si entra in modalit Manuale
    
    alarm = 0;

end 

Alarm_safe = alarm;

end

</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="Veloc">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="phi">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="Alarm_safe">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="ingaggio_AP">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="safe_V">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="11" name="safe_phi">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="12" name="Manuale">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">760</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">760</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="772">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/ALLINEAMENTO</P>
        <P Name="windowPosition">[441.103 15.517 257 414.621]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 1366 768 1.611111111111111]</P>
        <P Name="viewObj">772</P>
        <P Name="ssIdHighWaterMark">40</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">31</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">autoland</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">772</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [e_h,vel,lat_comandato,long_comandato,distance,QUOTA,ROTTA,counter_out] = autoland(modo,lat,long,h,psi,WP_db_info,WP_db_param,counter)
%#codegen
%WP_db_info=(nWP_tot n_WP frame command current autocontinue)
%per Nav
%WP_db_param=(velocit, autocontinue, vuoto, vuoto, lat_comandato, long_comandato, h_comandato)

persistent flag 

if isempty (flag)
    flag = 0;
end

%Definizione posizione waypoints
lat_comandato = WP_db_param(counter,5);
long_comandato = WP_db_param(counter,6);
h_comandato = WP_db_param(counter,7);

e_h = h_comandato - h; %errore quota

%Calcolo distanza velivolo-waypoint inseguito
a = (sin(((lat_comandato-lat)*pi/180)/2))^2+cos(lat*pi/180)*cos(lat_comandato*pi/180)*(sin(((long_comandato-long)*pi/180)/2))^2;
c = 2*atan2(sqrt(a),sqrt(1-a));
distance = 6378137*c;               

%Calcolo distanza velivolo-waypoint precedente
if counter &gt; 1
    psi_ref = atan2(sin((WP_db_param(counter,6)-WP_db_param(counter-1,6))*pi/180)*cos(WP_db_param(counter,5)*pi/180),cos(WP_db_param(counter-1,5)*pi/180)*sin(WP_db_param(counter,5)*pi/180)-sin(WP_db_param(counter-1,5)*pi/180)*cos(WP_db_param(counter,5)*pi/180)*cos((WP_db_param(counter,6)-WP_db_param(counter-1,6))*pi/180))*180/pi;     %psi di riferimento
    a_pre = (sin(((lat-WP_db_param(counter-1,5))*pi/180)/2))^2+cos(WP_db_param(counter-1,5)*pi/180)*cos(lat*pi/180)*(sin(((long-WP_db_param(counter-1,6))*pi/180)/2))^2;
    c_pre = 2*atan2(sqrt(a_pre),sqrt(1-a_pre));
    dist = 6378137*c_pre;                                                  %distanza velivolo-WP precedente
else
    psi_ref = atan2(sin((long_comandato-long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato-long)*pi/180))*180/pi;
    dist = 0;
end

if psi_ref &lt; 0
    psi_ref = 360 - abs(psi_ref);
end

autocontinue=WP_db_param(counter,2); 

%Definizione angolo tra WP successivi
if autocontinue == 1
    a_fut = (sin(((WP_db_param(counter+1,5)-WP_db_param(counter,5))*pi/180)/2))^2+cos(WP_db_param(counter,5)*pi/180)*cos(WP_db_param(counter+1,5)*pi/180)*(sin(((WP_db_param(counter+1,6)-WP_db_param(counter,6))*pi/180)/2))^2;
    c_fut = 2*atan2(sqrt(a_fut),sqrt(1-a_fut));
    dist_fut = 6378137*c_fut;    %distanza waypoint inseguito - waypoint successivo
    psi_ref_fut = atan2(sin((WP_db_param(counter+1,6)-WP_db_param(counter,6))*pi/180)*cos(WP_db_param(counter+1,5)*pi/180),cos(WP_db_param(counter,5)*pi/180)*sin(WP_db_param(counter+1,5)*pi/180)-sin(WP_db_param(counter,5)*pi/180)*cos(WP_db_param(counter+1,5)*pi/180)*cos((WP_db_param(counter+1,6)-WP_db_param(counter,6))*pi/180))*180/pi;      %distanza WP-WP+1
    if psi_ref_fut &lt; 0
        psi_ref_fut = 360 - abs(psi_ref_fut);
    end
    if counter &gt; 1
        angoloWP = abs(psi_ref_fut - psi_ref);
    else 
        angoloWP = abs(psi_ref_fut - (atan2(sin((long_comandato-long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato-long)*pi/180))*180/pi));
    end
else
    dist_fut = 0;
    angoloWP = 0;
end


if counter &lt; 2
    angoloWP_pre = 0;
elseif counter == 2
    angoloWP_pre = abs(psi_ref - atan2(sin((WP_db_param(counter-1,6)-long)*pi/180)*cos(WP_db_param(counter-1,5)*pi/180),cos(lat*pi/180)*sin(WP_db_param(counter-1,5)*pi/180)-sin(lat*pi/180)*cos(WP_db_param(counter-1,5)*pi/180)*cos((WP_db_param(counter-1,6)-long)*pi/180))*180/pi);
else
    psi_ref_pre = atan2(sin((WP_db_param(counter-1,6)-WP_db_param(counter-2,6))*pi/180)*cos(WP_db_param(counter-1,5)*pi/180),cos(WP_db_param(counter-2,5)*pi/180)*sin(WP_db_param(counter-1,5)*pi/180)-sin(WP_db_param(counter-2,5)*pi/180)*cos(WP_db_param(counter-1,5)*pi/180)*cos((WP_db_param(counter-1,6)-WP_db_param(counter-2,6))*pi/180))*180/pi;
if psi_ref_pre &lt; 0
    psi_ref_pre = 360 - abs(psi_ref_pre);
end
    angoloWP_pre = abs(psi_ref - psi_ref_pre);
end
    
if angoloWP &lt;=3                                  % Condizione aggiunta da Sensolini, altrimenti l&apos;errore in atterraggio era troppo grande
    error = 1;
    tolleranza_distWP_fut = 20;
elseif angoloWP &lt;= 10
    error = 30;                                       %Definizione raggio di errore 
    tolleranza_distWP_fut = 100;                      %Definizione distanza minima accettabile tra WP successivi
elseif angoloWP &gt; 10 &amp;&amp; angoloWP &lt;= 50 
    error = 80;
    tolleranza_distWP_fut = 250;
elseif angoloWP &gt; 50 &amp;&amp; angoloWP &lt;= 90     
    error = 100;
    tolleranza_distWP_fut = 300;
elseif angoloWP &gt; 90 &amp;&amp; angoloWP &lt;= 120     
    error = 150;
    tolleranza_distWP_fut = 350;
else     
    error = 200;
    tolleranza_distWP_fut = 400;
end

nWP=size(WP_db_param,1);

%Definizione distanza dal WP precedente per correzione traiettoria

if angoloWP_pre &lt;= 10
    soglia_dist = 80;                                   
elseif angoloWP_pre &gt; 10 &amp;&amp; angoloWP_pre &lt;= 50 
    soglia_dist = 200;
elseif angoloWP_pre &gt; 50 &amp;&amp; angoloWP_pre &lt;= 90 
    soglia_dist = 300;
elseif angoloWP_pre &gt; 90 &amp;&amp; angoloWP_pre &lt;= 120 
    soglia_dist = 350;
else
    soglia_dist = 400;
end

k=1.3;    %fattore moltiplicativo correzione rotta

%Definizione rotta
if autocontinue == 1  
    
    psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;     %rotta da seguire
    vel = WP_db_param(counter,1);                   %velocit di approccio al wp
    psi_comandato_fut = atan2(sin((WP_db_param(counter+1,6)-long)*pi/180)*cos(WP_db_param(counter+1,5)*pi/180),cos(lat*pi/180)*sin(WP_db_param(counter+1,5)*pi/180)-sin(lat*pi/180)*cos(WP_db_param(counter+1,5)*pi/180)*cos((WP_db_param(counter+1,6)-long)*pi/180))*180/pi;
    
    if vel &lt;= 20                                    %Definizione raggio di errore in base alla velocit di volo
        error = error*1.1;
    elseif (vel &lt;= 25 &amp;&amp; vel &gt; 20)
        error = error*1.2;
    elseif (vel &lt;= 30 &amp;&amp; vel &gt; 25)
        error = error*1.3;
    else 
        error = error*1.4;
    end
    
        if dist &lt; soglia_dist &amp;&amp; distance &gt; error
            psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
        elseif dist &gt; soglia_dist &amp;&amp; distance &gt; error
            psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
            err = abs ( psi_comandato - psi_ref );             %errore inseguimento rotta
            if (psi_ref &lt;= 90 &amp;&amp; psi_ref &gt;= 0)                 %primo quadrante
                if psi_comandato &gt; psi_ref
                    psi_comandato = psi_comandato + k*err;
                elseif psi_comandato &lt; psi_ref
                    psi_comandato = psi_comandato - k*err;
                else
                    psi_comandato = psi_comandato;
                end                   
            elseif (psi_ref &lt;= 180 &amp;&amp; psi_ref &gt; 90)             %quarto quadrante
                if psi_ref*psi_comandato &gt; 0
                    if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end                      
                else
                    err = abs ( 360 - abs(psi_comandato) - psi_ref); 
                    if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end                     
                end
            elseif(psi_ref &lt; -90 &amp;&amp; psi_ref &gt;= -180)             %terzo quadrante
                if psi_ref*psi_comandato &gt; 0
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref  || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end  
                else
                    err = abs ( 360 -(psi_comandato) - abs(psi_ref)); 
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end                     
                end
            elseif(psi_ref &lt; 0 &amp;&amp; psi_ref &gt;= -90)             %secondo quadrante
                if psi_comandato &gt; psi_ref
                    psi_comandato = psi_comandato + k*err;
                elseif psi_comandato &lt; psi_ref
                    psi_comandato = psi_comandato - k*err;
                else
                    psi_comandato = psi_comandato;
                end
            end
            
        elseif distance &lt; error
            if dist_fut &gt; tolleranza_distWP_fut
                psi_comandato = psi_comandato_fut;
                counter = counter + 1;
            else
                if counter &lt; nWP-1
                    counter = counter + 2;
                else
                    vel=22;
                    h_comandato=h+0.4;
                    psi_comandato=psi+36.6;   
                    e_h=0;
                    flag=1;
                end
            end
        end
         
    
else
    
    psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
    vel = WP_db_param(counter,1);                   
    error = 40;
    
        if dist &lt; soglia_dist &amp;&amp; flag == 0
                  psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
        elseif dist &gt; soglia_dist &amp;&amp; distance &gt; error &amp;&amp; flag == 0
                err = abs ( psi_comandato - psi_ref );        
                if (psi_ref &lt;= 90 &amp;&amp; psi_ref &gt;= 0)                 %primo quadrante
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end 
                elseif (psi_ref &lt;= 180 &amp;&amp; psi_ref &gt; 90)             %quarto quadrante
                    if psi_ref*psi_comandato &gt; 0
                        if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end
                    else
                        err = abs ( 360 - abs(psi_comandato) - psi_ref); 
                        if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end                     
                    end
                elseif(psi_ref &lt; -90 &amp;&amp; psi_ref &gt;= -180)             %terzo quadrante
                    if psi_ref*psi_comandato &gt; 0
                        if psi_comandato &gt; psi_ref
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref  || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end 
                    else
                        err = abs ( 360 -(psi_comandato) - abs(psi_ref)); 
                        if psi_comandato &gt; psi_ref
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end                         
                    end
                elseif(psi_ref &lt; 0 &amp;&amp; psi_ref &gt;= -90)             %secondo quadrante
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end
                end
                
        else            
                vel=22;
                h_comandato=h+0.4;
                psi_comandato=psi+36.6;   
                e_h=0;
                flag=1;                       %con flag=1 l&apos;aereo rimane in loiter senza uscire dal ciclo            
        end
          
end


%se ho nWPtotali=0 (lat,long,alt==0), traiettoria circolare
if lat_comandato == 0 &amp;&amp; long_comandato == 0 &amp;&amp; h_comandato==0    
    h_comandato=h+0.3;
    psi_comandato=psi+36.6;   
    vel=22;
    e_h=0;   
end

%output  
QUOTA = h_comandato;
ROTTA = psi_comandato;


%se arrivo all&apos;ultimo WP, loiter 
if counter == size(WP_db_param,1) &amp;&amp; autocontinue &gt; 0    
    autocontinue = 0;     
end

%I waipoint si resettano una volta conclusa la manovra
if modo == 4
    counter_out = counter;
else
    counter_out = 1;    
end




</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="39" name="modo">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="4" name="lat">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="long">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="h">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="19" name="psi">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="WP_db_info">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="23" name="WP_db_param">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="14" name="e_h">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="15" name="vel">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="16" name="lat_comandato">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="20" name="long_comandato">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="17" name="distance">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="18" name="QUOTA">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="21" name="ROTTA">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="35" name="counter">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="36" name="counter_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">772</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">772</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="793">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/FLARE/MATLAB Function</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">793</P>
        <P Name="ssIdHighWaterMark">7</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">32</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">rotta</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">793</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function rotta  = rotta(WP_db_param,lat,long)
%#codegen

lat_comandato = WP_db_param(3,5);      
long_comandato = WP_db_param(3,6);


psi_ref = atan2(sin((WP_db_param(3,6)-WP_db_param(2,6))*pi/180)*cos(WP_db_param(3,5)*pi/180),cos(WP_db_param(2,5)*pi/180)*sin(WP_db_param(3,5)*pi/180)-sin(WP_db_param(2,5)*pi/180)*cos(WP_db_param(3,5)*pi/180)*cos((WP_db_param(3,6)-WP_db_param(2,6))*pi/180))*180/pi;     %psi di riferimento

psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
err = abs ( psi_comandato - psi_ref ); 
k = 1.4;

if (psi_ref &lt;= 90 &amp;&amp; psi_ref &gt;= 0)                 %primo quadrante
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end
elseif (psi_ref &lt;= 180 &amp;&amp; psi_ref &gt; 90)             %quarto quadrante
                    if psi_ref*psi_comandato &gt; 0
                        if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end                      
                    else
                        err = abs ( 360 - abs(psi_comandato) - psi_ref); 
                        if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end                     
                    end
elseif(psi_ref &lt; -90 &amp;&amp; psi_ref &gt;= -180)             %terzo quadrante
                    if psi_ref*psi_comandato &gt; 0
                        if psi_comandato &gt; psi_ref
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref  || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end  
                    else
                        err = abs ( 360 -(psi_comandato) - abs(psi_ref)); 
                        if psi_comandato &gt; psi_ref
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end                     
                    end
elseif(psi_ref &lt; 0 &amp;&amp; psi_ref &gt;= -90)             %secondo quadrante
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end
end

rotta = psi_comandato;</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="WP_db_param">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="rotta">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="lat">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="long">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">793</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">793</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="802">
        <P Name="name">AIR RX/MATLAB Function2</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">802</P>
        <P Name="ssIdHighWaterMark">13</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">33</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">802</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [mess_out,Len,buffer] = fcn(status,mess_1,mess_2,buff_prev)


mess_out=uint8(zeros(1,100));
buffer = uint8(zeros(3,100));
counter = uint8(0);
Len = int32(0);



mess_out = buff_prev(3,:);       %il messaggio in uscita  l&apos;ultima riga
Len = int32(mess_out(1,2));



buffer(1,:) = uint8(zeros(1,100)); %buffer  buff_prev traslato in basso di 1 riga, quindi elimino mess_out
for j=2:1:3
buffer(j,:) = buff_prev(j-1,:);
end
i=3;
while i &gt;= 1                        %cerco la prima riga nulla dal basso
    if buffer(i,:) == 0
        counter = uint8(i);
        break
    end
    i = i-1;
end


if status == 1                   
    buffer(counter,:) = mess_1;
    
elseif status == 2
    buffer(counter,:) = mess_1;
    buffer(counter-1,:) = mess_2;
    
    
else
    buffer(counter,:) = uint8(zeros(1,100));


end



end
</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="10" name="mess_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="11" name="Len">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="status">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="mess_1">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="mess_2">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="4" name="buff_prev">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="buffer">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">802</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">802</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="814">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/CREAZIONE_WAYPOINT /AUTOLANDING_WAYPOINTS</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">814</P>
        <P Name="ssIdHighWaterMark">13</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">35</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">814</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">
function [WP_info,WP_param]  = fcn(Lat_Home,Long_Home,h_Home,alt,vel_wp1_al,vel_wp2_al)
%#codegen

WP_info=zeros(3,6);
WP_param=zeros(3,7);


for i=1:3

    WP_info(i,1)=3;                 %
    WP_info(i,2)=i-1;               % numero del waypoint da 1 a 6
    WP_info(i,3)=16;                % commande del tipo del command
    WP_info(i,4)=0;                 % sistema di riferimento
    WP_info(i,5)=0;                 % current waypoint
    WP_info(i,6)=1;                 %
    
    
    
    
WP_param(i,1)=vel_wp2_al;               %Velocita del WP
WP_param(i,2)=1;                % Autocontinue 1
WP_param(i,3)=0;                % Parametro  non utilizzato
WP_param(i,4)=0;                % Parametro  non utilizzato
WP_param(i,5)=Lat_Home(i);      % LAT
WP_param(i,6)=Long_Home(i);     % LONG
WP_param(i,7)=h_Home+alt(i);    % ALT
    
    
end

WP_param(1,1)=vel_wp1_al;
WP_param(3,2)=0;                % Autocontinue 1

end


</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="5" name="WP_info">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="WP_param">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="Lat_Home">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="Long_Home">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="h_Home">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="11" name="alt">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="12" name="vel_wp1_al">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="13" name="vel_wp2_al">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">814</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">814</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="827">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem3/GO_HOME</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">827</P>
        <P Name="ssIdHighWaterMark">15</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">37</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">go_home</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">827</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [V_goHome, h_goHome, RC_goHome, rotta_goHome] = go_home(lat, long, h, psi, Lat_Home, Long_Home, h_goHome_rif, V_goHome_rif)

persistent flag
if isempty (flag)
    flag = 0;
end

lat_comandato = Lat_Home;
long_comandato = Long_Home;

a = (sin(((lat_comandato-lat)*pi/180)/2))^2+cos(lat*pi/180)*cos(lat_comandato*pi/180)*(sin(((long_comandato-long)*pi/180)/2))^2;
c = 2*atan2(sqrt(a),sqrt(1-a));
distance = 6378137*c; 

rotta_goHome = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;     %rotta da seguire
h_goHome = h_goHome_rif;
V_goHome = V_goHome_rif;
RC_goHome = h_goHome - h;

    if distance &lt; 30 &amp;&amp; flag == 0
        flag = 1;
        V_goHome = V_goHome_rif;
        h_goHome = h_goHome_rif + 0.4;
        rotta_goHome = psi + 100;
        RC_goHome = 0;
    end
end</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="lat">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="V_goHome">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="long">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="h">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="8" name="psi">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="9" name="Lat_Home">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="10" name="Long_Home">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="11" name="h_goHome_rif">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="12" name="V_goHome_rif">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="13" name="h_goHome">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="14" name="RC_goHome">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="15" name="rotta_goHome">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">827</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">827</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="844">
        <P Name="name">AIR RX/MATLAB Function3</P>
        <P Name="windowPosition">[422 539.941 189 413]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 3600 1200 1.180555555555556]</P>
        <P Name="viewObj">844</P>
        <P Name="ssIdHighWaterMark">6</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">38</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">fcn</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">844</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function new_mex = fcn(mess_out,mess_out_prev)
persistent counter

if isempty(counter)
    counter = uint16(0);
end

new_mex = uint16(0);


if ( mess_out(3) ~= mess_out_prev(3) &amp;&amp; (all(mess_out ~= 0) == false) )

    if counter &gt; 100
        counter = uint16(0);
    end
    counter = counter +1;
end
new_mex = counter;

end
</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="mess_out">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="new_mex">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="mess_out_prev">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">844</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">844</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
      <chart id="852">
        <P Name="name">AUTOPILOTA/Subsystem1/Subsystem2/WAYPOINTS</P>
        <P Name="windowPosition">[441.103 15.517 257 414.621]</P>
        <P Name="viewLimits">[0 156.75 0 153.75]</P>
        <P Name="screen">[1 1 1366 768 1.611111111111111]</P>
        <P Name="viewObj">852</P>
        <P Name="ssIdHighWaterMark">37</P>
        <P Name="decomposition">CLUSTER_CHART</P>
        <P Name="type">EML_CHART</P>
        <P Name="chartFileNumber">39</P>
        <P Name="disableImplicitCasting">1</P>
        <eml>
          <P Name="name">waypoints_tracking</P>
        </eml>
        <Children>
          <state SSID="1">
            <P Name="labelString">eML_blk_kernel()</P>
            <P Name="position">[18 64.5 118 66]</P>
            <P Name="fontSize">12</P>
            <P Name="superState">SUBCHART</P>
            <P Name="subviewer">852</P>
            <P Name="type">FUNC_STATE</P>
            <P Name="decomposition">CLUSTER_STATE</P>
            <eml>
              <P Name="isEML">1</P>
              <P Name="script">function [e_h,vel,lat_comandato,long_comandato,distance,QUOTA,ROTTA,counter_out] = waypoints_tracking(lat,long,h,psi,WP_db_info,WP_db_param,GC_info,counter)
%#codegen
%WP_db_info=(nWP_tot n_WP frame command current autocontinue)
%per Nav
%WP_db_param=(velocit, autocontinue, vuoto, vuoto, lat_comandato, long_comandato, h_comandato)

persistent flag lat1 long1 

if isempty (flag)
    flag = 0;
end
if isempty (lat1)
    lat1 = 0;
end
if isempty (long1)
    long1=0;
end

% autocontinue = WP_db_param(counter,4);      %se vale 1 si procede al waypoint successivo, se vale 0 loitera sul waypoint

autocontinue = 1;
%se arrivo all&apos;ultimo WP, loiter 
if counter == size(WP_db_param,1) &amp;&amp; autocontinue &gt; 0    
    autocontinue = 0;     
end
% if autocontinue &gt;=1
%     autocontinue = 1;
% end

%se ricevo dei WP, comincio dal WP con il current
%altrimenti ricomincio dal WP1!!!
if GC_info==3
    counter=1;
    lat1=lat;
    long1=long;
    for indice=1:size(WP_db_param,1)
        if WP_db_info(indice,5)==1
            counter=indice;
        end
    end
end

%Definizione posizione waypoints
lat_comandato = WP_db_param(counter,5);
long_comandato = WP_db_param(counter,6);
h_comandato = WP_db_param(counter,7);

% e_lat = lat_comandato - lat;        %errore in gradi
% e_long = long_comandato - long;     %errore in gradi 
e_h = h_comandato - h;

a = (sin(((lat_comandato-lat)*pi/180)/2))^2+cos(lat*pi/180)*cos(lat_comandato*pi/180)*(sin(((long_comandato-long)*pi/180)/2))^2;
c = 2*atan2(sqrt(a),sqrt(1-a));
distance = 6378137*c;               %distanza velivolo-WP

if counter &gt; 1
    psi_ref = atan2(sin((WP_db_param(counter,6)-WP_db_param(counter-1,6))*pi/180)*cos(WP_db_param(counter,5)*pi/180),cos(WP_db_param(counter-1,5)*pi/180)*sin(WP_db_param(counter,5)*pi/180)-sin(WP_db_param(counter-1,5)*pi/180)*cos(WP_db_param(counter,5)*pi/180)*cos((WP_db_param(counter,6)-WP_db_param(counter-1,6))*pi/180))*180/pi;     %psi di riferimento
%    distWP = sqrt((6378137*(lat_comandato-WP_db_param(counter-1,5))*pi/180)^2 + (6378137*(long_comandato-WP_db_param(counter-1,6))*pi/180)^2);                                          %distanza tra due WP successivi
    a_pre = (sin(((lat-WP_db_param(counter-1,5))*pi/180)/2))^2+cos(WP_db_param(counter-1,5)*pi/180)*cos(lat*pi/180)*(sin(((long-WP_db_param(counter-1,6))*pi/180)/2))^2;
    c_pre = 2*atan2(sqrt(a_pre),sqrt(1-a_pre));
    dist = 6378137*c_pre;                                                  %distanza velivolo-WP precedente
else
    psi_ref = atan2(sin((long_comandato-long1)*pi/180)*cos(lat_comandato*pi/180),cos(lat1*pi/180)*sin(lat_comandato*pi/180)-sin(lat1*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato-long1)*pi/180))*180/pi;
%    distWP = 6378137;
    dist = 0;
end

if psi_ref &lt; 0
    psi_ref = 360 - abs(psi_ref);
end
      

%Definizione angolo tra WP successivi
if autocontinue == 1
    a_fut = (sin(((WP_db_param(counter+1,5)-WP_db_param(counter,5))*pi/180)/2))^2+cos(WP_db_param(counter,5)*pi/180)*cos(WP_db_param(counter+1,5)*pi/180)*(sin(((WP_db_param(counter+1,6)-WP_db_param(counter,6))*pi/180)/2))^2;
    c_fut = 2*atan2(sqrt(a_fut),sqrt(1-a_fut));
    dist_fut = 6378137*c_fut;
    psi_ref_fut = atan2(sin((WP_db_param(counter+1,6)-WP_db_param(counter,6))*pi/180)*cos(WP_db_param(counter+1,5)*pi/180),cos(WP_db_param(counter,5)*pi/180)*sin(WP_db_param(counter+1,5)*pi/180)-sin(WP_db_param(counter,5)*pi/180)*cos(WP_db_param(counter+1,5)*pi/180)*cos((WP_db_param(counter+1,6)-WP_db_param(counter,6))*pi/180))*180/pi;      %distanza WP-WP+1
    if psi_ref_fut &lt; 0
        psi_ref_fut = 360 - abs(psi_ref_fut);
    end
    if counter &gt; 1
        angoloWP = abs(psi_ref_fut - psi_ref);
    else 
        angoloWP = abs(psi_ref_fut - (atan2(sin((long_comandato-long1)*pi/180)*cos(lat_comandato*pi/180),cos(lat1*pi/180)*sin(lat_comandato*pi/180)-sin(lat1*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato-long1)*pi/180))*180/pi));
    end
else
    dist_fut = 0;
    angoloWP = 0;
end



if counter &lt; 2
    angoloWP_pre = 0;
elseif counter == 2
    angoloWP_pre = abs(psi_ref - atan2(sin((WP_db_param(counter-1,6)-long1)*pi/180)*cos(WP_db_param(counter-1,5)*pi/180),cos(lat1*pi/180)*sin(WP_db_param(counter-1,5)*pi/180)-sin(lat1*pi/180)*cos(WP_db_param(counter-1,5)*pi/180)*cos((WP_db_param(counter-1,6)-long1)*pi/180))*180/pi);
else
    psi_ref_pre = atan2(sin((WP_db_param(counter-1,6)-WP_db_param(counter-2,6))*pi/180)*cos(WP_db_param(counter-1,5)*pi/180),cos(WP_db_param(counter-2,5)*pi/180)*sin(WP_db_param(counter-1,5)*pi/180)-sin(WP_db_param(counter-2,5)*pi/180)*cos(WP_db_param(counter-1,5)*pi/180)*cos((WP_db_param(counter-1,6)-WP_db_param(counter-2,6))*pi/180))*180/pi;
if psi_ref_pre &lt; 0
    psi_ref_pre = 360 - abs(psi_ref_pre);
end
    angoloWP_pre = abs(psi_ref - psi_ref_pre);
end
    

if angoloWP &lt;= 10
    error = 40;                                       %Definizione raggio di errore 
    tolleranza_distWP_fut = 100;                      %Definizione distanza minima accettabile tra WP successivi
elseif angoloWP &gt; 10 &amp;&amp; angoloWP &lt;= 50 
    error = 60;
    tolleranza_distWP_fut = 250;
elseif angoloWP &gt; 50 &amp;&amp; angoloWP &lt;= 90     
    error = 80;
    tolleranza_distWP_fut = 300;
elseif angoloWP &gt; 90 &amp;&amp; angoloWP &lt;= 120     
    error = 120;
    tolleranza_distWP_fut = 350;
else     
    error = 150;
    tolleranza_distWP_fut = 400;
end

%Protezione WP troppo vicini
% for i=1 : size(WP_db_param,1)-1
%     a_fut(i) = (sin(((WP_db_param(i+1,5)-WP_db_param(i,5))*pi/180)/2))^2+cos(WP_db_param(i,5)*pi/180)*cos(WP_db_param(i+1,5)*pi/180)*(sin(((WP_db_param(i+1,6)-WP_db_param(i,6))*pi/180)/2))^2;
%     c_fut(i) = 2*atan2(sqrt(a_fut(i)),sqrt(1-a_fut(i)));
%     dist_fut(i) = 6378137*c_fut(i);
%     if dist_fut(i) &lt;= tolleranza_distWP_fut
%         WP_db_param(i+1,:) = [];
%     end
% end

nWP=size(WP_db_param,1);

if angoloWP_pre &lt;= 10
%     tolleranza_distWP = 100;                          
    soglia_dist = 50;                                   %Distanza dal WP precedente per correzione traiettoria
elseif angoloWP_pre &gt; 10 &amp;&amp; angoloWP_pre &lt;= 50 
%     tolleranza_distWP = 250;
    soglia_dist = 200;
elseif angoloWP_pre &gt; 50 &amp;&amp; angoloWP_pre &lt;= 90 
%     tolleranza_distWP = 300;
    soglia_dist = 300;
elseif angoloWP_pre &gt; 90 &amp;&amp; angoloWP_pre &lt;= 120 
%     tolleranza_distWP = 350;
    soglia_dist = 350;
else
%     tolleranza_distWP = 400;
    soglia_dist = 400;
end

k=1.3;    %fattore moltiplicativo correzione rotta

%Definizione rotta

if autocontinue == 1
    
    psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;     %rotta da seguire
    vel = WP_db_param(counter,3);                   %inserisci velocit desiderata 
    psi_comandato_fut = atan2(sin((WP_db_param(counter+1,6)-long)*pi/180)*cos(WP_db_param(counter+1,5)*pi/180),cos(lat*pi/180)*sin(WP_db_param(counter+1,5)*pi/180)-sin(lat*pi/180)*cos(WP_db_param(counter+1,5)*pi/180)*cos((WP_db_param(counter+1,6)-long)*pi/180))*180/pi;
    if vel &lt; 15
        vel = 25;
    end
    
    if vel &lt;= 20                                    %Definizione raggio di errore in base alla velocit di volo
        error = error*1;
    elseif (vel &lt;= 25 &amp;&amp; vel &gt; 20)
        error = error*1.2;
    elseif (vel &lt;= 30 &amp;&amp; vel &gt; 25)
        error = error*1.3;
    else 
        error = error*1.4;
    end
    
        psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;    
        if dist &lt; soglia_dist &amp;&amp; distance &gt; error
            psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
        elseif dist &gt; soglia_dist &amp;&amp; distance &gt; error
            psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
            err = abs ( psi_comandato - psi_ref );             %errore inseguimento rotta
            if (psi_ref &lt;= 90 &amp;&amp; psi_ref &gt;= 0)                 %primo quadrante
                if psi_comandato &gt; psi_ref
                    psi_comandato = psi_comandato + k*err;
                elseif psi_comandato &lt; psi_ref
                    psi_comandato = psi_comandato - k*err;
                else
                    psi_comandato = psi_comandato;
                end                   
            elseif (psi_ref &lt;= 180 &amp;&amp; psi_ref &gt; 90)             %quarto quadrante
                if psi_ref*psi_comandato &gt; 0
                    if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end                      
                else
                    err = abs ( 360 - abs(psi_comandato) - psi_ref); 
                    if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end                     
                end
            elseif(psi_ref &lt; -90 &amp;&amp; psi_ref &gt;= -180)             %terzo quadrante
                if psi_ref*psi_comandato &gt; 0
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref  || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end  
                else
                    err = abs ( 360 -(psi_comandato) - abs(psi_ref)); 
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end                     
                end
            elseif(psi_ref &lt; 0 &amp;&amp; psi_ref &gt;= -90)             %secondo quadrante
                if psi_comandato &gt; psi_ref
                    psi_comandato = psi_comandato + k*err;
                elseif psi_comandato &lt; psi_ref
                    psi_comandato = psi_comandato - k*err;
                else
                    psi_comandato = psi_comandato;
                end
            end
            
        elseif distance &lt; error
            if dist_fut &gt; tolleranza_distWP_fut
                psi_comandato = psi_comandato_fut;
                counter = counter + 1;
            else
                if counter &lt; nWP-1
                    counter = counter + 2;
                else
                    vel=22;
                    h_comandato=h+0.4;
                    psi_comandato=psi+36.6;   
                    e_h=0;
                    flag=1;
                end
            end
        end
            
    flag = 0;
    
else
    
    psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
    vel = WP_db_param(counter,3);                   %inserisci velocit desiderata
    error = 40;
    if vel &lt; 15
        vel = 25;
    end
    
        if dist &lt; soglia_dist &amp;&amp; flag == 0
                  psi_comandato = atan2(sin((long_comandato - long)*pi/180)*cos(lat_comandato*pi/180),cos(lat*pi/180)*sin(lat_comandato*pi/180)-sin(lat*pi/180)*cos(lat_comandato*pi/180)*cos((long_comandato - long)*pi/180))*180/pi;
        elseif dist &gt; soglia_dist &amp;&amp; distance &gt; error &amp;&amp; flag == 0
                err = abs ( psi_comandato - psi_ref );        
                if (psi_ref &lt;= 90 &amp;&amp; psi_ref &gt;= 0)                 %primo quadrante
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end 
                elseif (psi_ref &lt;= 180 &amp;&amp; psi_ref &gt; 90)             %quarto quadrante
                    if psi_ref*psi_comandato &gt; 0
                        if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end
                    else
                        err = abs ( 360 - abs(psi_comandato) - psi_ref); 
                        if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end                     
                    end
                elseif(psi_ref &lt; -90 &amp;&amp; psi_ref &gt;= -180)             %terzo quadrante
                    if psi_ref*psi_comandato &gt; 0
                        if psi_comandato &gt; psi_ref
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref  || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end 
                    else
                        err = abs ( 360 -(psi_comandato) - abs(psi_ref)); 
                        if psi_comandato &gt; psi_ref
                            psi_comandato = psi_comandato + k*err;
                        elseif psi_comandato &lt; psi_ref || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
                            psi_comandato = psi_comandato - k*err;
                        else
                            psi_comandato = psi_comandato;
                        end                         
                    end
                elseif(psi_ref &lt; 0 &amp;&amp; psi_ref &gt;= -90)             %secondo quadrante
                    if psi_comandato &gt; psi_ref
                        psi_comandato = psi_comandato + k*err;
                    elseif psi_comandato &lt; psi_ref
                        psi_comandato = psi_comandato - k*err;
                    else
                        psi_comandato = psi_comandato;
                    end
                end
                
        else            
                vel=22;
                h_comandato=h+0.4;
                psi_comandato=psi+36.6;   
                e_h=0;
                flag=1;                       %con flag=1 l&apos;aereo rimane in loiter senza uscire dal ciclo            
        end
          
end


%se ho nWPtotali=0 (lat,long,alt==0), traiettoria circolare
if lat_comandato == 0 &amp;&amp; long_comandato == 0 &amp;&amp; h_comandato==0    
    h_comandato=h+0.3;
    psi_comandato=psi+36.6;   
    vel=22;
    e_h=0;   
end

%output  
QUOTA = h_comandato;
ROTTA = psi_comandato;

counter_out=counter;





% function [e_h,vel,lat_comandato,long_comandato,distance,QUOTA,ROTTA,counter_out] = waypoints_tracking(lat,long,h,psi,WP_db_info,WP_db_param,GC_info,counter)
% %#codegen
% %WP_db_info=(nWP_tot n_WP frame command current autocontinue)
% %per Nav
% %WP_db_param=(velocit, autocontinue, vuoto, vuoto, lat_comandato, long_comandato, h_comandato)
% 
% persistent flag
% 
% if isempty(flag)
%     flag = 0;
% end
% 
% counter_out=counter;
% autocontinue = WP_db_param(counter,2);      %se vale 1 si procede al waypoint successivo, se vale 0 loitera sul waypoint
% 
% if autocontinue &gt;=1
%     autocontinue = 1;
% end
% 
% %se ricevo dei WP, comincio dal WP con il current
% %altrimenti ricomincio dal WP1!!!
% if GC_info==3
%     counter=1;
%     for indice=1:size(WP_db_param,1)
%         if WP_db_info(indice,5)==1
%             counter=indice;
%         end
%     end
% end
% 
% %Definizione posizione waypoints
% lat_comandato = WP_db_param(counter,5);
% long_comandato = WP_db_param(counter,6);
% h_comandato = WP_db_param(counter,7);
% 
% e_lat = lat_comandato - lat;        %errore in gradi
% e_long = long_comandato - long;     %errore in gradi 
% e_h = h_comandato - h;
% 
% e_x=6378137*e_lat*pi/180;           %passo a errore di distanza   %prima si utilizzava per il raggio 6372800;
% e_y=6378137*e_long*pi/180;          %passo a errore di distanza
% distance=sqrt((e_x)^2 + (e_y)^2 + (e_h)^2);
% 
% if counter &gt; 1   
%     psi_ref = atan2((6378137*(WP_db_param(counter,6)-WP_db_param(counter-1,6))*pi/180),(6378137*((WP_db_param(counter,5)-WP_db_param(counter-1,5))*pi/180))) *180/pi;
% else
%     psi_ref = atan2((e_y),(e_x)) *180/pi; 
% end
% 
% if counter &gt; 1
%     dist = sqrt((6378137*(lat_comandato-WP_db_param(counter-1,5)))^2 + (6378137*(long_comandato-WP_db_param(counter-1,6)))^2);
% else
%     dist = 6378137;
% end
%          
% tolleranza_dist = 320;
% tolleranza_rotta_1 = 18;
% tolleranza_rotta_2 = 9;
% tolleranza_rotta_3 = 2;
% 
% %Definizione rotta
% 
% if autocontinue == 1
%     
%     psi_comandato = atan2((e_y),(e_x)) *180/pi; 
%     vel = WP_db_param(counter,1);         %inserisci velocit desiderata
%     
%     if vel &lt;= 20                          %Definizione raggio di errore
%         error = 25;
%     elseif (vel &lt;= 25 &amp;&amp; vel &gt; 20)
%         error = 30;
%     elseif (vel &lt;= 30 &amp;&amp; vel &gt; 25)
%         error = 40;
%     else 
%         error = 45;
%     end
% 
%     if dist &gt; tolleranza_dist 
%         
%         psi_comandato = atan2((e_y),(e_x)) *180/pi; 
%         
%         if distance &gt;= error*3
%             
%             if (psi_ref &lt;= 90 &amp;&amp; psi_ref &gt;= 0)                 %primo quadrante
%                 if abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_1
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 35;
%                     else
%                         psi_comandato = psi_comandato - 35;
%                     end
%                 elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 12;
%                     else
%                         psi_comandato = psi_comandato - 12;
%                     end
%                 elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 4;
%                     else
%                         psi_comandato = psi_comandato - 4;
%                     end
%                 end
%             elseif (psi_ref &lt;= 180 &amp;&amp; psi_ref &gt; 90)             %secondo quadrante
%                 if psi_ref*psi_comandato &gt; 0
%                     if abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_1
%                         if (psi_comandato &gt; psi_ref) || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 35;
%                         else
%                             psi_comandato = psi_comandato - 35;
%                         end
%                     elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 12;
%                         else
%                             psi_comandato = psi_comandato - 12;
%                         end
%                     elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                         if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 4;
%                         else
%                             psi_comandato = psi_comandato - 4;
%                         end
%                     end
%                 else
%                     if abs(360 - abs(psi_comandato) - psi_ref) &gt; tolleranza_rotta_1
%                         if (psi_comandato &gt; psi_ref) || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 35;
%                         else
%                             psi_comandato = psi_comandato - 35;
%                         end
%                     elseif abs(360 - abs(psi_comandato) - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 12;
%                         else
%                             psi_comandato = psi_comandato - 12;
%                         end
%                     elseif abs(360 - abs(psi_comandato) - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                         if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 4;
%                         else
%                             psi_comandato = psi_comandato - 4;
%                         end
%                     end
%                 end
%             elseif(psi_ref &lt; -90 &amp;&amp; psi_ref &gt;= -180)             %terzo quadrante
%                 if psi_ref*psi_comandato &gt; 0
%                     if abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 35;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 35;
%                         end
%                     elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 12;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 12;
%                         end
%                     elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 4;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 4;
%                         end
%                     end 
%                 else
%                     if abs(360 - psi_comandato - abs(psi_ref)) &gt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 35;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 35;
%                         end
%                     elseif abs(360 - psi_comandato - abs(psi_ref)) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 12;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 12;
%                         end
%                     elseif abs(360 - psi_comandato - abs(psi_ref)) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 4;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 4;
%                         end
%                     end 
%                 end
%             elseif(psi_ref &lt; 0 &amp;&amp; psi_ref &gt;= -90)             %quarto quadrante
%                 if abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_1
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 35;
%                     else
%                         psi_comandato = psi_comandato - 35;
%                     end
%                 elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 12;
%                     else
%                         psi_comandato = psi_comandato - 12;
%                     end
%                 elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 4;
%                     else
%                         psi_comandato = psi_comandato - 4;
%                     end
%                 end
%             end
%         elseif (distance &lt; error*3 &amp;&amp; distance &gt; error)
% 
%             psi_comandato_fut = atan2((6378137*(WP_db_param(counter+1,6)-long)*pi/180),(6378137*((WP_db_param(counter+1,5)-lat)*pi/180))) *180/pi;
% 
%             if (abs(psi_comandato_fut - psi_comandato) &gt; 30 &amp;&amp; abs(psi_comandato_fut - psi_comandato) &lt; 60)
% 
%                 vel = 23;
%                 psi_comandato = psi_comandato_fut;
%                 counter = counter + 1;
% 
%             elseif (abs(psi_comandato_fut - psi_comandato) &gt;= 60 &amp;&amp; abs(psi_comandato_fut - psi_comandato) &lt; 90) 
% 
%                 vel = 23;
%                 psi_comandato = psi_comandato_fut;
%                 counter = counter + 1;
% 
%             elseif (abs(psi_comandato_fut - psi_comandato) &gt;= 90 &amp;&amp; abs(psi_comandato_fut - psi_comandato) &lt; 120)
%                 vel = 23;
%                 psi_comandato = psi_comandato_fut;
%                 counter=counter + 1;
% 
%             elseif abs(psi_comandato_fut - psi_comandato) &gt; 120
% 
%                 vel = 23;
%                 psi_comandato = psi_comandato_fut;
%                 counter=counter + 1;
% 
%             end
%             
%         else
%             counter = counter + 1;
%             
%         end
%         
%     elseif (dist &lt;= tolleranza_dist &amp;&amp; dist &gt; 100)
%         if distance &gt;= error
%             
%             psi_comandato = atan2((e_y),(e_x)) *180/pi; 
%             vel = WP_db_param(counter,1);
%         
%         else 
%             
%             counter = counter + 1;
%             
%         end
%         
%     else
%         
%         counter = counter + 1;
%         
%     end
%         
%         
%     flag = 0;
%           
% else
%    
%         
%     
%     error = 35;
%     if dist &gt; tolleranza_dist
%         
%         if (distance &gt; error*2 &amp;&amp; flag == 0) 
% 
%             vel = WP_db_param(counter,1);
%             psi_comandato = atan2((e_y),(e_x)) *180/pi;
% 
% 
%             if (psi_ref &lt;= 90 &amp;&amp; psi_ref &gt;= 0)                 %primo quadrante
%                 if abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_1
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 35;
%                     else
%                         psi_comandato = psi_comandato - 35;
%                     end
%                 elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 12;
%                     else
%                         psi_comandato = psi_comandato - 12;
%                     end
%                 elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 4;
%                     else
%                         psi_comandato = psi_comandato - 4;
%                     end
%                 end
%             elseif (psi_ref &lt;= 180 &amp;&amp; psi_ref &gt; 90)             %secondo quadrante
%                 if psi_ref*psi_comandato &gt; 0
%                     if abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_1
%                         if (psi_comandato &gt; psi_ref) || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 35;
%                         else
%                             psi_comandato = psi_comandato - 35;
%                         end
%                     elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 12;
%                         else
%                             psi_comandato = psi_comandato - 12;
%                         end
%                     elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                         if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 4;
%                         else
%                             psi_comandato = psi_comandato - 4;
%                         end
%                     end
%                 else
%                     if abs(360 - abs(psi_comandato) - psi_ref) &gt; tolleranza_rotta_1
%                         if (psi_comandato &gt; psi_ref) || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 35;
%                         else
%                             psi_comandato = psi_comandato - 35;
%                         end
%                     elseif abs(360 - abs(psi_comandato) - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 12;
%                         else
%                             psi_comandato = psi_comandato - 12;
%                         end
%                     elseif abs(360 - abs(psi_comandato) - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                         if psi_comandato &gt; psi_ref || ( psi_comandato &lt; -90 &amp;&amp; psi_comandato &gt; -180)
%                             psi_comandato = psi_comandato + 4;
%                         else
%                             psi_comandato = psi_comandato - 4;
%                         end
%                     end
%                 end
%             elseif(psi_ref &lt; -90 &amp;&amp; psi_ref &gt;= -180)             %terzo quadrante
%                 if psi_ref*psi_comandato &gt; 0
%                     if abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 35;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 35;
%                         end
%                     elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 12;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 12;
%                         end
%                     elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 4;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 4;
%                         end
%                     end 
%                 else
%                     if abs(360 - psi_comandato - abs(psi_ref)) &gt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 35;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 35;
%                         end
%                     elseif abs(360 - psi_comandato - abs(psi_ref)) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 12;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 12;
%                         end
%                     elseif abs(360 - psi_comandato - abs(psi_ref)) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                         if psi_comandato &gt; psi_ref
%                             psi_comandato = psi_comandato + 4;
%                         elseif (psi_comandato &lt; psi_ref) || (psi_comandato &lt; 180 &amp;&amp; psi_comandato &gt; 90)
%                             psi_comandato = psi_comandato - 4;
%                         end
%                     end 
%                 end
%             elseif(psi_ref &lt; 0 &amp;&amp; psi_ref &gt;= -90)             %quarto quadrante
%                 if abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_1
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 35;
%                     else
%                         psi_comandato = psi_comandato - 35;
%                     end
%                 elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_2 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_1
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 12;
%                     else
%                         psi_comandato = psi_comandato - 12;
%                     end
%                 elseif abs(psi_comandato - psi_ref) &gt; tolleranza_rotta_3 &amp;&amp; abs(psi_comandato - psi_ref) &lt; tolleranza_rotta_2
%                     if psi_comandato &gt; psi_ref
%                         psi_comandato = psi_comandato + 4;
%                     else
%                         psi_comandato = psi_comandato - 4;
%                     end
%                 end
%             end
%             
%         
%         else
% 
%             vel=22;
%             h_comandato=h+0.4;
%             psi_comandato=psi+30;   
%             e_h=0;
%             flag=1;                       %con flag=1 l&apos;aereo rimane in loiter senza uscire dal ciclo
% 
%         end
%        
%     else
%         
%         if (distance &gt; error*2 &amp;&amp; flag == 0)
%             
%             psi_comandato = atan2((e_y),(e_x)) *180/pi; 
%             vel = WP_db_param(counter,1);
%             
%         else
%             
%             vel=22;
%             h_comandato=h+0.4;
%             psi_comandato=psi+30;   
%             e_h=0;
%             flag=1;                       %con flag=1 l&apos;aereo rimane in loiter senza uscire dal ciclo
%             
%         end
%         
%     end
%             
% end
% 
% 
% 
% %se ho nWPtotali=0 (lat,long,alt==0), traiettoria circolare
% if lat_comandato == 0 &amp;&amp; long_comandato == 0 &amp;&amp; h_comandato==0    
%     h_comandato=h+0.4;
%     psi_comandato=psi+20;   
%     vel=22;
%     e_h=0;   
% end
% 
% %output  
% QUOTA = h_comandato;
% ROTTA = psi_comandato;
% 
% 
% %se arrivo all&apos;ultimo WP, loiter 
% if counter == size(WP_db_param,1) &amp;&amp; autocontinue &gt; 0    
%     autocontinue = 0;     
% end
% 
% counter_out=counter;
</P>
              <P Name="editorLayout" Class="double">Matrix(4,1)
[10.0, 5.0, 700.0, 500.0]</P>
            </eml>
          </state>
          <data SSID="4" name="lat">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="5" name="long">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="6" name="h">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="19" name="psi">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="7" name="WP_db_info">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="14" name="e_h">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="15" name="vel">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="16" name="lat_comandato">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="20" name="long_comandato">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="17" name="distance">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="18" name="QUOTA">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="21" name="ROTTA">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="23" name="WP_db_param">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="24" name="GC_info">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="35" name="counter">
            <P Name="scope">INPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_INHERITED</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <data SSID="36" name="counter_out">
            <P Name="scope">OUTPUT_DATA</P>
            <props>
              <array>
                <P Name="size">-1</P>
              </array>
              <type>
                <P Name="method">SF_INHERITED_TYPE</P>
                <P Name="primitive">SF_DOUBLE_TYPE</P>
                <P Name="isSigned">1</P>
                <P Name="wordLength">16</P>
              </type>
              <P Name="complexity">SF_COMPLEX_INHERITED</P>
              <P Name="frame">SF_FRAME_NO</P>
              <unit>
                <P Name="name">inherit</P>
              </unit>
            </props>
            <P Name="dataType">Inherit: Same as Simulink</P>
          </data>
          <transition SSID="2">
            <P Name="labelString">{eML_blk_kernel();}</P>
            <P Name="labelPosition">[28.125 13.875 102.544 14.964]</P>
            <P Name="fontSize">12</P>
            <src>
              <P Name="intersection">[0 0 1 0 23.5747 14.625 0 0]</P>
            </src>
            <dst>
              <P Name="SSID">3</P>
              <P Name="intersection">[1 0 -1 0 23.5747 42.5747 0 0]</P>
            </dst>
            <P Name="midPoint">[23.5747 24.9468]</P>
            <P Name="dataLimits">[21.175 25.975 14.625 42.575]</P>
            <P Name="subviewer">852</P>
            <P Name="drawStyle">SMART</P>
            <slide>
              <P Name="sticky">BOTH_STICK</P>
            </slide>
            <P Name="executionOrder">1</P>
          </transition>
          <junction SSID="3">
            <P Name="position">[23.5747 49.5747 7]</P>
            <P Name="subviewer">852</P>
            <P Name="type">CONNECTIVE_JUNCTION</P>
          </junction>
        </Children>
      </chart>
    </Children>
  </machine>
  <instance id="364">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/DECOLLO AUTOMATICO/Chart1</P>
    <P Name="chart">332</P>
  </instance>
  <instance id="377">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/APPROACH/MATLAB Function</P>
    <P Name="chart">365</P>
  </instance>
  <instance id="389">
    <P Name="machine">331</P>
    <P Name="name">Misure Sensori/BMP_280/MATLAB Function</P>
    <P Name="chart">378</P>
  </instance>
  <instance id="397">
    <P Name="machine">331</P>
    <P Name="name">Misure Sensori/GPS_Venus/Subsystem2/Create_message</P>
    <P Name="chart">390</P>
  </instance>
  <instance id="414">
    <P Name="machine">331</P>
    <P Name="name">Misure Sensori/GPS_Venus/Subsystem2/Subsystem/MATLAB Function</P>
    <P Name="chart">398</P>
  </instance>
  <instance id="431">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/CALIBRATING_HOME_COORDINATES</P>
    <P Name="chart">415</P>
  </instance>
  <instance id="442">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/CREAZIONE_WAYPOINT /MATLAB Function</P>
    <P Name="chart">432</P>
  </instance>
  <instance id="450">
    <P Name="machine">331</P>
    <P Name="name">MISURE DA SENSORI 
FILTRATE/TX &amp; RX Seriale
Arduino Raspberry/Subsystem1/MATLAB Function</P>
    <P Name="chart">443</P>
  </instance>
  <instance id="467">
    <P Name="machine">331</P>
    <P Name="name">AIR TX/Enable /Chart</P>
    <P Name="chart">451</P>
  </instance>
  <instance id="498">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/Chart1</P>
    <P Name="chart">468</P>
  </instance>
  <instance id="506">
    <P Name="machine">331</P>
    <P Name="name">AIR TX/Heartbeat/Alarm set</P>
    <P Name="chart">499</P>
  </instance>
  <instance id="514">
    <P Name="machine">331</P>
    <P Name="name">AIR TX/If_subsystem/iflogic_function</P>
    <P Name="chart">507</P>
  </instance>
  <instance id="524">
    <P Name="machine">331</P>
    <P Name="name">AIR TX/Waypoints/MATLAB Function</P>
    <P Name="chart">515</P>
  </instance>
  <instance id="557">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem/VETTORIALE</P>
    <P Name="chart">525</P>
  </instance>
  <instance id="566">
    <P Name="machine">331</P>
    <P Name="name">Misure Sensori/BMP_280/MATLAB Function1</P>
    <P Name="chart">558</P>
  </instance>
  <instance id="593">
    <P Name="machine">331</P>
    <P Name="name">AIR RX/MATLAB Function1</P>
    <P Name="chart">567</P>
  </instance>
  <instance id="602">
    <P Name="machine">331</P>
    <P Name="name">Misure Sensori/X-Sense MTi/MATLAB Function1</P>
    <P Name="chart">594</P>
  </instance>
  <instance id="612">
    <P Name="machine">331</P>
    <P Name="name">AIR RX/MATLAB Function4</P>
    <P Name="chart">603</P>
  </instance>
  <instance id="622">
    <P Name="machine">331</P>
    <P Name="name">MISURE DA SENSORI 
FILTRATE/TX &amp; RX Seriale
Arduino Raspberry/Subsystem1/MATLAB Function1</P>
    <P Name="chart">613</P>
  </instance>
  <instance id="659">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Chart</P>
    <P Name="chart">623</P>
  </instance>
  <instance id="668">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/AUTOPILOTI1/CONTROLLORE DI QUOTA/SELEZIONE MODALITA&apos; 
HOLD//SELECT</P>
    <P Name="chart">660</P>
  </instance>
  <instance id="733">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/GESTIONE AUTOPILOTI1/ STATI</P>
    <P Name="chart">669</P>
  </instance>
  <instance id="751">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/GESTIONE AUTOPILOTI1/Intervento Manager/MATLAB Function1</P>
    <P Name="chart">734</P>
  </instance>
  <instance id="759">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/GESTIONE AUTOPILOTI1/MATLAB Function</P>
    <P Name="chart">752</P>
  </instance>
  <instance id="771">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/GESTIONE AUTOPILOTI1/Safe Manager/MATLAB Function1</P>
    <P Name="chart">760</P>
  </instance>
  <instance id="792">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/ALLINEAMENTO</P>
    <P Name="chart">772</P>
  </instance>
  <instance id="801">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/FLARE/MATLAB Function</P>
    <P Name="chart">793</P>
  </instance>
  <instance id="813">
    <P Name="machine">331</P>
    <P Name="name">AIR RX/MATLAB Function2</P>
    <P Name="chart">802</P>
  </instance>
  <instance id="826">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem1/CREAZIONE_WAYPOINT /AUTOLANDING_WAYPOINTS</P>
    <P Name="chart">814</P>
  </instance>
  <instance id="843">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem3/GO_HOME</P>
    <P Name="chart">827</P>
  </instance>
  <instance id="851">
    <P Name="machine">331</P>
    <P Name="name">AIR RX/MATLAB Function3</P>
    <P Name="chart">844</P>
  </instance>
  <instance id="872">
    <P Name="machine">331</P>
    <P Name="name">AUTOPILOTA/Subsystem1/Subsystem2/WAYPOINTS</P>
    <P Name="chart">852</P>
  </instance>
</Stateflow>
